System.register(["./json-asset-1f2be75e.js"],(function(t){"use strict";var e,r,i,n,s,a,u,o,h,f,c,d,l,v,_,m,g,p,w,x,b,T,y,A,M,E,I,B,P,R,O,U,S,N,V,F,C,L,D;return{setters:[function(t){e=t.e1,r=t.f$,i=t.go,n=t.l,s=t.dl,a=t.dm,u=t.w,o=t.bU,h=t.t,f=t.b3,c=t.aq,d=t.z,l=t.G,v=t.F,_=t.gp,m=t.eO,g=t.gq,p=t.gr,w=t.gs,x=t.gt,b=t.c5,T=t.ee,y=t.eb,A=t.d,M=t.aH,E=t.dh,I=t.e8,B=t.c9,P=t.b4,R=t.bd,O=t.x,U=t.de,S=t.ef,N=t.y,V=t.eg,F=t.ec,C=t.cU,L=t.eh,D=t.dA}],execute:function(){var k,G,z,H,W,X=t("B",function(){function t(){this._arrayBufferOrPaddings=[],this._length=0}var e=t.prototype;return e.setNextAlignment=function(t){if(0!==t){var e=this._length%t;if(0!==e){var r=t-e;this._arrayBufferOrPaddings.push(r),this._length+=r}}},e.addBuffer=function(t){var e=this._length;return this._arrayBufferOrPaddings.push(t),this._length+=t.byteLength,e},e.getLength=function(){return this._length},e.getCombined=function(){var t=new Uint8Array(this._length),e=0;return this._arrayBufferOrPaddings.forEach((function(r){"number"==typeof r?e+=r:(t.set(new Uint8Array(r),e),e+=r.byteLength)})),t.buffer},t}()),j=function(){function t(t,e){if(this._mesh=void 0,this._subMeshRenderings=[],this._mesh=t,this._mesh.struct.morph){var r=this._mesh.struct.primitives.length;this._subMeshRenderings=new Array(r).fill(null);for(var n=0;n<r;++n){var s=this._mesh.struct.morph.subMeshMorphs[n];s&&(s.targets.length>i.MAX_MORPH_TARGET_COUNT?this._subMeshRenderings[n]=new J(this._mesh,n,this._mesh.struct.morph,e):this._subMeshRenderings[n]=new q(this._mesh,n,this._mesh.struct.morph,e))}}}return t.prototype.createInstance=function(){for(var t=this,e=this._mesh.struct.primitives.length,r=new Array(e),i=0;i<e;++i){var n,s;r[i]=null!==(n=null===(s=this._subMeshRenderings[i])||void 0===s?void 0:s.createInstance())&&void 0!==n?n:null}return{setWeights:function(t,e){var i;null===(i=r[t])||void 0===i||i.setWeights(e)},requiredPatches:function(e){g(t._mesh.struct.morph);var i=t._mesh.struct.morph.subMeshMorphs[e],n=r[e];if(null===n)return null;var s=[{name:"CC_USE_MORPH",value:!0},{name:"CC_MORPH_TARGET_COUNT",value:i.targets.length}];return i.attributes.includes(f.ATTR_POSITION)&&s.push({name:"CC_MORPH_TARGET_HAS_POSITION",value:!0}),i.attributes.includes(f.ATTR_NORMAL)&&s.push({name:"CC_MORPH_TARGET_HAS_NORMAL",value:!0}),i.attributes.includes(f.ATTR_TANGENT)&&s.push({name:"CC_MORPH_TARGET_HAS_TANGENT",value:!0}),s.push.apply(s,n.requiredPatches()),s},adaptPipelineState:function(t,e){var i;null===(i=r[t])||void 0===i||i.adaptPipelineState(e)},destroy:function(){for(var t,e=h(r);!(t=e()).done;){var i=t.value;null==i||i.destroy()}}}},t}(),q=function(){function t(t,e,r,i){this._gfxDevice=void 0,this._subMeshMorph=void 0,this._textureInfo=void 0,this._attributes=void 0,this._verticesCount=void 0,this._gfxDevice=i;var n=r.subMeshMorphs[e];this._subMeshMorph=n,$(t,e,i);var s=t.struct.vertexBundles[t.struct.primitives[e].vertexBundelIndices[0]].view.count;this._verticesCount=s;var a=n.targets.length,u=Y(i,s*a);this._textureInfo={width:u.width,height:u.height},this._attributes=n.attributes.map((function(e,r){var i=u.create(),a=i.valueView;return n.targets.forEach((function(e,i){for(var n=e.displacements[r],u=new Float32Array(t.data.buffer,t.data.byteOffset+n.offset,n.count),o=s*i*4,h=0;h<s;++h)a[o+4*h+0]=u[3*h+0],a[o+4*h+1]=u[3*h+1],a[o+4*h+2]=u[3*h+2]})),i.updatePixels(),{name:e,morphTexture:i}}))}var e=t.prototype;return e.destroy=function(){for(var t,e=h(this._attributes);!(t=e()).done;)t.value.morphTexture.destroy()},e.createInstance=function(){var t=this,e=new Q(this._gfxDevice,this._subMeshMorph.targets.length);return e.setMorphTextureInfo(this._textureInfo.width,this._textureInfo.height),e.setVerticesCount(this._verticesCount),e.commit(),{setWeights:function(t){e.setWeights(t),e.commit()},requiredPatches:function(){return[{name:"CC_MORPH_TARGET_USE_TEXTURE",value:!0}]},adaptPipelineState:function(r){for(var n,s=h(t._attributes);!(n=s()).done;){var a=n.value,o=void 0;switch(a.name){case f.ATTR_POSITION:o=x;break;case f.ATTR_NORMAL:o=w;break;case f.ATTR_TANGENT:o=p;break;default:u("Unexpected attribute!")}void 0!==o&&(r.bindSampler(o,a.morphTexture.sampler),r.bindTexture(o,a.morphTexture.texture))}r.bindBuffer(i.BINDING,e.buffer),r.update()},destroy:function(){}}},t}(),J=function(){function t(t,e,r,i){this._gfxDevice=void 0,this._attributes=[],this._gfxDevice=i;var n=r.subMeshMorphs[e];$(t,e,i),this._attributes=n.attributes.map((function(e,r){return{name:e,targets:n.targets.map((function(e){return{displacements:new Float32Array(t.data.buffer,t.data.byteOffset+e.displacements[r].offset,e.displacements[r].count)}}))}}))}return t.prototype.createInstance=function(){return new Z(this,this._attributes[0].targets[0].displacements.length/3,this._gfxDevice)},e(t,[{key:"data",get:function(){return this._attributes}}]),t}(),Z=function(){function t(t,e,r){this._attributes=void 0,this._owner=void 0,this._morphUniforms=void 0,this._owner=t,this._morphUniforms=new Q(r,0);var i=Y(r,e);this._morphUniforms.setMorphTextureInfo(i.width,i.height),this._morphUniforms.commit(),this._attributes=this._owner.data.map((function(t){var e=i.create();return{attributeName:t.name,morphTexture:e}}))}var e=t.prototype;return e.setWeights=function(t){for(var e=0;e<this._attributes.length;++e){var i=this._attributes[e],n=i.morphTexture.valueView,s=this._owner.data[e];r(t.length===s.targets.length);for(var a=0;a<s.targets.length;++a){var u=s.targets[a].displacements,o=t[a],h=u.length/3;if(0===a)for(var f=0;f<h;++f)n[4*f+0]=u[3*f+0]*o,n[4*f+1]=u[3*f+1]*o,n[4*f+2]=u[3*f+2]*o;else if(0!==o)for(var c=0;c<h;++c)n[4*c+0]+=u[3*c+0]*o,n[4*c+1]+=u[3*c+1]*o,n[4*c+2]+=u[3*c+2]*o}i.morphTexture.updatePixels()}},e.requiredPatches=function(){return[{name:"CC_MORPH_TARGET_USE_TEXTURE",value:!0},{name:"CC_MORPH_PRECOMPUTED",value:!0}]},e.adaptPipelineState=function(t){for(var e,r=h(this._attributes);!(e=r()).done;){var n=e.value,s=void 0;switch(n.attributeName){case f.ATTR_POSITION:s=x;break;case f.ATTR_NORMAL:s=w;break;case f.ATTR_TANGENT:s=p;break;default:u("Unexpected attribute!")}void 0!==s&&(t.bindSampler(s,n.morphTexture.sampler),t.bindTexture(s,n.morphTexture.texture))}t.bindBuffer(i.BINDING,this._morphUniforms.buffer),t.update()},e.destroy=function(){this._morphUniforms.destroy();for(var t=0;t<this._attributes.length;++t)this._attributes[t].morphTexture.destroy()},t}(),Q=function(){function t(t,e){this._targetCount=void 0,this._localBuffer=void 0,this._remoteBuffer=void 0,this._targetCount=e,this._localBuffer=new DataView(new ArrayBuffer(i.SIZE)),this._remoteBuffer=t.createBuffer(new c(d.UNIFORM|d.TRANSFER_DST,l.HOST|l.DEVICE,i.SIZE,i.SIZE))}var s=t.prototype;return s.destroy=function(){this._remoteBuffer.destroy()},s.setWeights=function(t){r(t.length===this._targetCount);for(var e=0;e<t.length;++e)this._localBuffer.setFloat32(i.OFFSET_OF_WEIGHTS+4*e,t[e],n.sys.isLittleEndian)},s.setMorphTextureInfo=function(t,e){this._localBuffer.setFloat32(i.OFFSET_OF_DISPLACEMENT_TEXTURE_WIDTH,t,n.sys.isLittleEndian),this._localBuffer.setFloat32(i.OFFSET_OF_DISPLACEMENT_TEXTURE_HEIGHT,e,n.sys.isLittleEndian)},s.setVerticesCount=function(t){this._localBuffer.setFloat32(i.OFFSET_OF_VERTICES_COUNT,t,n.sys.isLittleEndian)},s.commit=function(){this._remoteBuffer.update(this._localBuffer.buffer)},e(t,[{key:"buffer",get:function(){return this._remoteBuffer}}]),t}();function Y(t,e){var r,i,n,h;t.hasFeature(v.TEXTURE_FLOAT)?(r=e,n=16,i=a.PixelFormat.RGBA32F,h=Float32Array):(r=4*e,n=4,i=a.PixelFormat.RGBA8888,h=Uint8Array);var f=function(t){t<5&&(t=5);var e=_(t),r=m(e),i=r>>1;return{width:1<<(1&r?i+1:i),height:1<<i}}(r),c=f.width,d=f.height;return{width:c,height:d,create:function(){var e=new ArrayBuffer(c*d*n),r=new Float32Array(e),f=h===Float32Array?r:new h(e),l=new s({width:c,height:d,_data:f,_compressed:!1,format:i}),v=new a;v.setFilters(a.Filter.NEAREST,a.Filter.NEAREST),v.setMipFilter(a.Filter.NONE),v.setWrapMode(a.WrapMode.CLAMP_TO_EDGE,a.WrapMode.CLAMP_TO_EDGE,a.WrapMode.CLAMP_TO_EDGE),v.image=l,v.getGFXTexture()||u("Unexpected: failed to create morph texture?");var _=o.getSampler(t,v.getSamplerHash());return{get texture(){return v.getGFXTexture()},get sampler(){return _},get valueView(){return r},destroy:function(){v.destroy()},updatePixels:function(){v.uploadData(f)}}}}}function $(t,e,r){t.renderingSubMeshes[e].enableVertexIdChannel(r)}function K(t){switch(t){case 1:return Uint8Array;case 2:return Uint16Array;case 4:return Uint32Array;default:return Uint8Array}}var tt=new b,et=new b,rt=new Uint8Array,it=t("M",T("cc.Mesh")((W=function(t){function r(){var e;return(e=t.call(this)||this).morphRendering=null,V(e,"_struct",z,F(e)),V(e,"_hash",H,F(e)),e._data=rt,e._initialized=!1,e._renderingSubMeshes=null,e._boneSpaceBounds=new Map,e._jointBufferIndices=null,e}y(r,t);var i=r.prototype;return i.initialize=function(){if(!this._initialized){this._initialized=!0;for(var t=this._data.buffer,e=n.director.root.device,r=this._createVertexBuffers(e,t),i=[],s=0;s<this._struct.primitives.length;s++){var a=this._struct.primitives[s];if(0!==a.vertexBundelIndices.length){var u=null,o=null;if(a.indexView){var h=a.indexView,f=h.stride,_=h.length;if(4===f&&!e.hasFeature(v.ELEMENT_INDEX_UINT)){var m=this._struct.vertexBundles[a.vertexBundelIndices[0]].view.count;if(m>=65536){A(10001,m,65536);continue}f>>=1,_>>=1}u=e.createBuffer(new c(d.INDEX,l.DEVICE,_,f)),o=new(K(h.stride))(t,h.offset,h.count),h.stride!==f&&(o=K(f).from(o)),u.update(o)}var g=a.vertexBundelIndices.map((function(t){return r[t]})),p=[];if(a.vertexBundelIndices.length>0)for(var w=a.vertexBundelIndices[0],x=this._struct.vertexBundles[w].attributes,b=0;b<x.length;++b){var T=x[b];p[b]=new M(T.name,T.format,T.isInstanced,T.stream,T.isInstanced,T.location)}var y=new E(g,p,a.primitiveMode,u);y.mesh=this,y.subMeshIdx=s,i.push(y)}}this._renderingSubMeshes=i,this._struct.morph&&(this.morphRendering=function(t,e){return new j(t,e)}(this,e))}},i.destroy=function(){return this.destroyRenderingMesh(),t.prototype.destroy.call(this)},i.destroyRenderingMesh=function(){if(this._renderingSubMeshes){for(var t=0;t<this._renderingSubMeshes.length;t++)this._renderingSubMeshes[t].destroy();this._renderingSubMeshes=null,this._initialized=!1}},i.assign=function(t,e){this.reset({struct:t,data:e})},i.reset=function(t){this.destroyRenderingMesh(),this._struct=t.struct,this._data=t.data,this._hash=0},i.getBoneSpaceBounds=function(t){if(this._boneSpaceBounds.has(t.hash))return this._boneSpaceBounds.get(t.hash);var e=[];this._boneSpaceBounds.set(t.hash,e);for(var r=[],i=t.bindposes,n=0;n<i.length;n++)e.push(new I(1/0,1/0,1/0,-1/0,-1/0,-1/0)),r.push(!1);for(var s=this._struct.primitives,a=0;a<s.length;a++){var u=this.readAttribute(a,f.ATTR_JOINTS),o=this.readAttribute(a,f.ATTR_WEIGHTS),h=this.readAttribute(a,f.ATTR_POSITION);if(u&&o&&h)for(var c=Math.min(u.length/4,o.length/4,h.length/3),d=0;d<c;d++){b.set(tt,h[3*d+0],h[3*d+1],h[3*d+2]);for(var l=0;l<4;++l){var v=4*d+l,_=u[v];if(!(0===o[v]||_>=i.length)){b.transformMat4(et,tt,i[_]),r[_]=!0;var m=e[_];b.min(m.center,m.center,et),b.max(m.halfExtents,m.halfExtents,et)}}}}for(var g=0;g<i.length;g++){var p=e[g];r[g]?I.fromPoints(p,p.center,p.halfExtents):e[g]=null}return e},i.merge=function(t,e,r){if(r&&!this.validateMergingMesh(t))return!1;var i=new b,n=e&&new B,s=e&&new I;if(n&&e.getRotation(n),!this._initialized){var a=JSON.parse(JSON.stringify(t._struct)),u=t._data.slice();if(e){a.maxPosition&&a.minPosition&&(b.add(s.center,a.maxPosition,a.minPosition),b.multiplyScalar(s.center,s.center,.5),b.subtract(s.halfExtents,a.maxPosition,a.minPosition),b.multiplyScalar(s.halfExtents,s.halfExtents,.5),I.transform(s,s,e),b.add(a.maxPosition,s.center,s.halfExtents),b.subtract(a.minPosition,s.center,s.halfExtents));for(var o=0;o<a.vertexBundles.length;o++)for(var c=a.vertexBundles[o],d=0;d<c.attributes.length;d++)if(c.attributes[d].name===f.ATTR_POSITION||c.attributes[d].name===f.ATTR_NORMAL){var l=c.attributes[d].format,v=new DataView(u.buffer,c.view.offset+nt(c.attributes,d)),_=ut(v,l),m=ot(v,l);if(!_||!m)continue;for(var g=c.view.count,p=c.view.stride,w=at(l),x=0;x<g;x++){var T=x*p,y=T+w,A=y+w;switch(i.set(_(T),_(y),_(A)),c.attributes[d].name){case f.ATTR_POSITION:i.transformMat4(e);break;case f.ATTR_NORMAL:b.transformQuat(i,i,n)}m(T,i.x),m(y,i.y),m(A,i.z)}}}return this.reset({struct:a,data:u}),this.initialize(),!0}for(var M,E,R,O,U,S=new X,N=0,V=0,F=0,C=0,L=0,D=0,k=0,G=0,z=!1,H=new Array(this._struct.vertexBundles.length),W=0;W<this._struct.vertexBundles.length;++W){var j=this._struct.vertexBundles[W],q=t._struct.vertexBundles[W];F=j.view.offset,C=q.view.offset,V=j.view.stride,N=j.view.count+q.view.count,M=new ArrayBuffer(N*V),E=new Uint8Array(M),F+=(R=this._data.subarray(F,F+j.view.length)).length,C+=(O=t._data.subarray(C,C+q.view.length)).length,E.set(R),L=0;for(var J,Z=h(j.attributes);!(J=Z()).done;){var Q=J.value;k=0,z=!1;for(var Y,$=h(q.attributes);!(Y=$()).done;){var K=Y.value;if(Q.name===K.name&&Q.format===K.format){z=!0;break}k+=P[K.format].size}if(z){G=P[Q.format].size,D=j.view.length+L;for(var tt=0;tt<q.view.count;++tt){if(U=O.subarray(k,k+G),E.set(U,D),(Q.name===f.ATTR_POSITION||Q.name===f.ATTR_NORMAL)&&e){var et=new Float32Array(E.buffer,D,3);switch(i.set(et[0],et[1],et[2]),Q.name){case f.ATTR_POSITION:i.transformMat4(e);break;case f.ATTR_NORMAL:b.transformQuat(i,i,n)}et[0]=i.x,et[1]=i.y,et[2]=i.z}D+=j.view.stride,k+=q.view.stride}}L+=P[Q.format].size}H[W]={attributes:j.attributes,view:{offset:S.getLength(),length:M.byteLength,count:N,stride:V}},S.addBuffer(M)}for(var rt,it,st,ht=0,ft=2,ct=0,dt=new Array(this._struct.primitives.length),lt=0;lt<this._struct.primitives.length;++lt){var vt=this._struct.primitives[lt],_t=t._struct.primitives[lt];dt[lt]={primitiveMode:vt.primitiveMode,vertexBundelIndices:vt.vertexBundelIndices};for(var mt,gt=h(vt.vertexBundelIndices);!(mt=gt()).done;){var pt=mt.value;ct=Math.max(ct,this._struct.vertexBundles[pt].view.count)}if(vt.indexView&&_t.indexView){ht=vt.indexView.count,ht+=_t.indexView.count,F=vt.indexView.offset,C=_t.indexView.offset,ft=ht<256?1:ht<65536?2:4;var wt=new ArrayBuffer(ht*ft);if(rt=2===ft?new Uint16Array(wt):1===ft?new Uint8Array(wt):new Uint32Array(wt),it=2===vt.indexView.stride?new Uint16Array(this._data.buffer,F,vt.indexView.count):1===vt.indexView.stride?new Uint8Array(this._data.buffer,F,vt.indexView.count):new Uint32Array(this._data.buffer,F,vt.indexView.count),ft===vt.indexView.stride)rt.set(it);else for(var xt=0;xt<vt.indexView.count;++xt)rt[xt]=it[xt];F+=vt.indexView.length,st=2===_t.indexView.stride?new Uint16Array(t._data.buffer,C,_t.indexView.count):1===_t.indexView.stride?new Uint8Array(t._data.buffer,C,_t.indexView.count):new Uint32Array(t._data.buffer,C,_t.indexView.count);for(var bt=0;bt<_t.indexView.count;++bt)rt[vt.indexView.count+bt]=ct+st[bt];C+=_t.indexView.length,dt[lt].indexView={offset:S.getLength(),length:wt.byteLength,count:ht,stride:ft},S.setNextAlignment(ft),S.addBuffer(wt)}}var Tt={vertexBundles:H,primitives:dt,minPosition:this._struct.minPosition,maxPosition:this._struct.maxPosition};return Tt.minPosition&&t._struct.minPosition&&Tt.maxPosition&&t._struct.maxPosition&&(e?(b.add(s.center,t._struct.maxPosition,t._struct.minPosition),b.multiplyScalar(s.center,s.center,.5),b.subtract(s.halfExtents,t._struct.maxPosition,t._struct.minPosition),b.multiplyScalar(s.halfExtents,s.halfExtents,.5),I.transform(s,s,e),b.add(i,s.center,s.halfExtents),b.max(Tt.maxPosition,Tt.maxPosition,i),b.subtract(i,s.center,s.halfExtents),b.min(Tt.minPosition,Tt.minPosition,i)):(b.min(Tt.minPosition,Tt.minPosition,t._struct.minPosition),b.max(Tt.maxPosition,Tt.maxPosition,t._struct.maxPosition))),this.reset({struct:Tt,data:new Uint8Array(S.getCombined())}),this.initialize(),!0},i.validateMergingMesh=function(t){if(this._struct.vertexBundles.length!==t._struct.vertexBundles.length)return!1;for(var e=0;e<this._struct.vertexBundles.length;++e){var r=this._struct.vertexBundles[e],i=t._struct.vertexBundles[e];if(r.attributes.length!==i.attributes.length)return!1;for(var n=0;n<r.attributes.length;++n)if(r.attributes[n].format!==i.attributes[n].format)return!1}if(this._struct.primitives.length!==t._struct.primitives.length)return!1;for(var s=0;s<this._struct.primitives.length;++s){var a=this._struct.primitives[s],u=t._struct.primitives[s];if(a.vertexBundelIndices.length!==u.vertexBundelIndices.length)return!1;for(var o=0;o<a.vertexBundelIndices.length;++o)if(a.vertexBundelIndices[o]!==u.vertexBundelIndices[o])return!1;if(a.primitiveMode!==u.primitiveMode)return!1;if(a.indexView){if(void 0===u.indexView)return!1}else if(u.indexView)return!1}return!0},i.readAttribute=function(t,e){var r=this,i=null;return this._accessAttribute(t,e,(function(t,e){var n=t.view.count,s=t.attributes[e].format,a=R(P[s]);if(0!==n){var u=new DataView(r._data.buffer,t.view.offset+nt(t.attributes,e)),o=P[s],h=ut(u,s);if(a&&h){for(var f=o.count,c=new a(n*f),d=t.view.stride,l=0;l<n;++l)for(var v=0;v<f;++v)c[f*l+v]=h(d*l+c.BYTES_PER_ELEMENT*v);i=c}}})),i},i.copyAttribute=function(t,e,r,i,n){var s=this,a=!1;return this._accessAttribute(t,e,(function(t,e){var u=t.view.count;if(0!==u){var o=t.attributes[e].format,h=new DataView(s._data.buffer,t.view.offset+nt(t.attributes,e)),f=new DataView(r,n),c=P[o],d=ut(h,o),l=ot(f,o);if(d&&l){for(var v=c.count,_=t.view.stride,m=at(o),g=i,p=m,w=0;w<u;++w)for(var x=0;x<v;++x)l(g*w+p*x,d(_*w+m*x));a=!0}}else a=!0})),a},i.readIndices=function(t){if(t>=this._struct.primitives.length)return null;var e=this._struct.primitives[t];if(!e.indexView)return null;var r=e.indexView.stride;return new(1===r?Uint8Array:2===r?Uint16Array:Uint32Array)(this._data.buffer,e.indexView.offset,e.indexView.count)},i.copyIndices=function(t,e){if(t>=this._struct.primitives.length)return!1;var r=this._struct.primitives[t];if(!r.indexView)return!1;for(var i=r.indexView.count,n=1===r.indexView.stride?O.R8UI:2===r.indexView.stride?O.R16UI:O.R32UI,s=ut(new DataView(this._data.buffer),n),a=0;a<i;++a)e[a]=s(r.indexView.offset+P[n].size*a);return!0},i._accessAttribute=function(t,e,r){if(!(t>=this._struct.primitives.length))for(var i,n=this._struct.primitives[t],s=h(n.vertexBundelIndices);!(i=s()).done;){var a=i.value,u=this._struct.vertexBundles[a],o=u.attributes.findIndex((function(t){return t.name===e}));if(!(o<0)){r(u,o);break}}},i._createVertexBuffers=function(t,e){return this._struct.vertexBundles.map((function(r){var i=t.createBuffer(new c(d.VERTEX,l.DEVICE,r.view.length,r.view.stride)),n=new Uint8Array(e,r.view.offset,r.view.length);return i.update(n),i}))},i.initDefault=function(e){t.prototype.initDefault.call(this,e),this.reset({struct:{vertexBundles:[],primitives:[]},data:rt})},i.validate=function(){return this.renderingSubMeshes.length>0&&this.data.byteLength>0},e(r,[{key:"_nativeAsset",get:function(){return this._data.buffer},set:function(t){this._data=new Uint8Array(t)}},{key:"subMeshCount",get:function(){var t=this.renderingSubMeshes;return t?t.length:0}},{key:"minPosition",get:function(){return this.struct.minPosition}},{key:"maxPosition",get:function(){return this.struct.maxPosition}},{key:"struct",get:function(){return this._struct}},{key:"data",get:function(){return this._data}},{key:"hash",get:function(){return this._hash||(this._hash=C(this._data,666)),this._hash}},{key:"jointBufferIndices",get:function(){return this._jointBufferIndices?this._jointBufferIndices:this._jointBufferIndices=this._struct.primitives.map((function(t){return t.jointMapIndex||0}))}},{key:"renderingSubMeshes",get:function(){return this.initialize(),this._renderingSubMeshes}}]),r}(U),z=S((G=W).prototype,"_struct",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{vertexBundles:[],primitives:[]}}}),H=S(G.prototype,"_hash",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=G))||k);function nt(t,e){for(var r=0,i=0;i<e;++i){var n=t[i];r+=P[n.format].size}return r}n.Mesh=it;var st=D.isLittleEndian;function at(t){var e=P[t];return e.size/e.count}function ut(t,e){var r=P[e],i=r.size/r.count;switch(r.type){case N.UNORM:switch(i){case 1:return function(e){return t.getUint8(e)};case 2:return function(e){return t.getUint16(e,st)};case 4:return function(e){return t.getUint32(e,st)}}break;case N.SNORM:case N.INT:switch(i){case 1:return function(e){return t.getInt8(e)};case 2:return function(e){return t.getInt16(e,st)};case 4:return function(e){return t.getInt32(e,st)}}break;case N.UINT:switch(i){case 1:return function(e){return t.getUint8(e)};case 2:return function(e){return t.getUint16(e,st)};case 4:return function(e){return t.getUint32(e,st)}}break;case N.FLOAT:return function(e){return t.getFloat32(e,st)}}return null}function ot(t,e){var r=P[e],i=r.size/r.count;switch(r.type){case N.UNORM:switch(i){case 1:return function(e,r){return t.setUint8(e,r)};case 2:return function(e,r){return t.setUint16(e,r,st)};case 4:return function(e,r){return t.setUint32(e,r,st)}}break;case N.SNORM:case N.INT:switch(i){case 1:return function(e,r){return t.setInt8(e,r)};case 2:return function(e,r){return t.setInt16(e,r,st)};case 4:return function(e,r){return t.setInt32(e,r,st)}}break;case N.UINT:switch(i){case 1:return function(e,r){return t.setUint8(e,r)};case 2:return function(e,r){return t.setUint16(e,r,st)};case 4:return function(e,r){return t.setUint32(e,r,st)}}break;case N.FLOAT:return function(e,r){return t.setFloat32(e,r,st)}}return null}}}}));
