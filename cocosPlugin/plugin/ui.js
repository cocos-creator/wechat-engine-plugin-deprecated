System.register(["./json-asset-1f2be75e.js","./index-a996f499.js","./view-368b93a3.js","./deprecated-c0e66301.js","./camera-component-4c08f67b.js","./renderable-component-da5e0106.js","./transform-utils-ca30a5c5.js","./sprite-frame-9016d268.js","./sprite-dc4183cc.js","./renderable-2d-549948c8.js","./deprecated-4eee0a13.js"],(function(t){"use strict";var e,i,o,n,r,s,a,h,l,c,u,_,p,d,g,f,y,b,T,m,v,C,S,E,O,A,w,L,D,P,z,I,R,x,B,N,H,M,k,V,F,j,G,U,W,Z,Y,X,q,K,Q,J,$,tt,et,it,ot,nt,rt,st,at,ht,lt,ct,ut,_t,pt,dt,gt,ft,yt,bt,Tt,mt,vt,Ct;return{setters:[function(t){e=t.cj,i=t.cK,o=t.ee,n=t.ej,r=t.dG,s=t.fX,a=t.eb,h=t.cq,l=t.gC,c=t.c5,u=t.ea,_=t.e1,p=t.ef,d=t.fY,g=t.g9,f=t.fZ,y=t.gB,b=t.ei,T=t.fT,m=t.gG,v=t.gH,C=t.eg,S=t.ec,E=t.dN,O=t.eh,A=t.cJ,w=t.cc,L=t.l,D=t.gI,P=t.dA,z=t.eV,I=t.eT,R=t.gJ,x=t.gK,B=t.gL,N=t.cf,H=t.gn,M=t.w,k=t.c3,V=t.cp,F=t.gd,j=t.ge,G=t.dC,U=t.db,W=t.t,Z=t.c,Y=t.eQ,X=t.et,q=t.dH,K=t.gM,Q=t.d,J=t.gm,$=t.fh,tt=t.eU,et=t.eK,it=t.c_,ot=t.dl,nt=t.dm,rt=t.eL},function(t){st=t.E,at=t.d,ht=t.D},function(t){lt=t.v,ct=t.w,ut=t.K,_t=t._,pt=t.r,dt=t.p},function(){},function(t){gt=t.C},function(){},function(){},function(t){ft=t.S},function(t){yt=t.a,bt=t.B,Tt=t.c,mt=t.V},function(t){vt=t.R,Ct=t.U},function(){}],execute:function(){var St,Et,Ot,At,wt,Lt,Dt,Pt,zt,It,Rt,xt,Bt,Nt,Ht,Mt,kt,Vt,Ft,jt,Gt,Ut,Wt,Zt,Yt,Xt,qt,Kt,Qt,Jt,$t,te,ee,ie,oe,ne,re,se,ae,he,le,ce,ue,_e,pe,de,ge,fe,ye,be,Te,me,ve,Ce=new e;!function(t){t[t.NONE=0]="NONE",t[t.COLOR=1]="COLOR",t[t.SPRITE=2]="SPRITE",t[t.SCALE=3]="SCALE"}(Te||(Te={})),i(Te),function(t){t.NORMAL="normal",t.HOVER="hover",t.PRESSED="pressed",t.DISABLED="disabled"}(me||(me={})),function(t){t.CLICK="click"}(ve||(ve={}));var Se,Ee,Oe,Ae,we=(St=o("cc.Button"),Et=d(),Ot=g(110),At=f(),wt=y(Ct),Lt=n(r),Dt=b(),Pt=T(),zt=b(),It=T(),Rt=n(Te),xt=b(),Bt=T(),Nt=T(),Ht=T(),Mt=T(),kt=T(),Vt=m(),Ft=v(),jt=T(),Gt=T(),Ut=n(ft),Wt=T(),Zt=n(ft),Yt=T(),Xt=n(ft),qt=T(),Kt=n(ft),Qt=T(),Jt=n([st]),$t=b(),te=T(),Se=St(ee=Et(ee=Ot(ee=At(ee=wt(ee=s((be=ye=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,C(i,"clickEvents",oe,S(i)),C(i,"_interactable",ne,S(i)),C(i,"_transition",re,S(i)),C(i,"_normalColor",se,S(i)),C(i,"_hoverColor",ae,S(i)),C(i,"_pressedColor",he,S(i)),C(i,"_disabledColor",le,S(i)),C(i,"_normalSprite",ce,S(i)),C(i,"_hoverSprite",ue,S(i)),C(i,"_pressedSprite",_e,S(i)),C(i,"_disabledSprite",pe,S(i)),C(i,"_duration",de,S(i)),C(i,"_zoomScale",ge,S(i)),C(i,"_target",fe,S(i)),i._pressed=!1,i._hovered=!1,i._fromColor=new e,i._toColor=new e,i._time=0,i._transitionFinished=!0,i._fromScale=new c,i._toScale=new c,i._originalScale=null,i._sprite=null,i._targetScale=new c,i}a(i,t);var o=i.prototype;return o.__preload=function(){this.target||(this.target=this.node);var t=this.node.getComponent(yt);t&&(this._normalSprite=t.spriteFrame),this._applyTarget(),this._resetState()},o.onEnable=function(){this._registerNodeEvent()},o.onDisable=function(){this._resetState(),this._unregisterNodeEvent()},o.update=function(t){var i=this.target;if(!this._transitionFinished&&i&&(this._transition===Te.COLOR||this._transition===Te.SCALE)){this._time+=t;var o=1;if(this._duration>0&&(o=this._time/this._duration),o>=1&&(o=1),this._transition===Te.COLOR){var n=i._uiProps.uiComp;e.lerp(Ce,this._fromColor,this._toColor,o),n&&(n.color=Ce)}else this.transition===Te.SCALE&&(i.getScale(this._targetScale),this._targetScale.x=h(this._fromScale.x,this._toScale.x,o),this._targetScale.y=h(this._fromScale.y,this._toScale.y,o),i.setScale(this._targetScale));1===o&&(this._transitionFinished=!0)}},o._resizeNodeToTargetNode=function(){this.target&&this.target._uiProps.uiTransformComp},o._resetState=function(){this._pressed=!1,this._hovered=!1;var t=this.target;if(t){var e=this._transition;if(e===Te.COLOR&&this._interactable){var i=t.getComponent(vt);i&&(i.color=this._normalColor)}else e===Te.SCALE&&this._originalScale&&t.setScale(this._originalScale);this._transitionFinished=!0}},o._registerNodeEvent=function(){this.node.on(l.TOUCH_START,this._onTouchBegan,this),this.node.on(l.TOUCH_MOVE,this._onTouchMove,this),this.node.on(l.TOUCH_END,this._onTouchEnded,this),this.node.on(l.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(l.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(l.MOUSE_LEAVE,this._onMouseMoveOut,this)},o._registerTargetEvent=function(t){t.on(l.TRANSFORM_CHANGED,this._onTargetTransformChanged,this)},o._unregisterNodeEvent=function(){this.node.off(l.TOUCH_START,this._onTouchBegan,this),this.node.off(l.TOUCH_MOVE,this._onTouchMove,this),this.node.off(l.TOUCH_END,this._onTouchEnded,this),this.node.off(l.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(l.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(l.MOUSE_LEAVE,this._onMouseMoveOut,this)},o._unregisterTargetEvent=function(t){t.off(l.TRANSFORM_CHANGED)},o._getTargetSprite=function(t){var e=null;return t&&(e=t.getComponent(yt)),e},o._applyTarget=function(){this.target&&(this._sprite=this._getTargetSprite(this.target),this._originalScale||(this._originalScale=new c),c.copy(this._originalScale,this.target.getScale()))},o._onTargetSpriteFrameChanged=function(t){this._transition===Te.SPRITE&&this._setCurrentStateSpriteFrame(t.spriteFrame)},o._setCurrentStateSpriteFrame=function(t){if(t)switch(this._getButtonState()){case me.NORMAL:this._normalSprite=t;break;case me.HOVER:this._hoverSprite=t;break;case me.PRESSED:this._pressedSprite=t;break;case me.DISABLED:this._disabledSprite=t}},o._onTargetColorChanged=function(t){this._transition===Te.COLOR&&this._setCurrentStateColor(t)},o._setCurrentStateColor=function(t){switch(this._getButtonState()){case me.NORMAL:this._normalColor=t;break;case me.HOVER:this._hoverColor=t;break;case me.PRESSED:this._pressedColor=t;break;case me.DISABLED:this._disabledColor=t}},o._onTargetTransformChanged=function(t){t|u.SCALE&&this._originalScale&&this._transition===Te.SCALE&&this._transitionFinished&&c.copy(this._originalScale,this.target.getScale())},o._onTouchBegan=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),t&&(t.propagationStopped=!0))},o._onTouchMove=function(t){if(this._interactable&&this.enabledInHierarchy&&this._pressed&&t){var e=t.touch;if(e){var i,o=this.node._uiProps.uiTransformComp.isHit(e.getUILocation());this._transition===Te.SCALE&&this.target&&this._originalScale?o?(c.copy(this._fromScale,this._originalScale),c.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._transitionFinished=!1):(this._time=0,this._transitionFinished=!0,this.target.setScale(this._originalScale)):(i=o?me.PRESSED:me.NORMAL,this._applyTransition(i)),t&&(t.propagationStopped=!0)}}},o._onTouchEnded=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed&&(st.emitEvents(this.clickEvents,t),this.node.emit(ve.CLICK,this)),this._pressed=!1,this._updateState(),t&&(t.propagationStopped=!0))},o._onTouchCancel=function(){this._interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())},o._onMouseMoveIn=function(){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this._transition!==Te.SPRITE||this._hoverSprite)&&(this._hovered||(this._hovered=!0,this._updateState()))},o._onMouseMoveOut=function(){this._hovered&&(this._hovered=!1,this._updateState())},o._updateState=function(){var t=this._getButtonState();this._applyTransition(t)},o._getButtonState=function(){var t=me.NORMAL;return this._interactable?this._pressed?t=me.PRESSED:this._hovered&&(t=me.HOVER):t=me.DISABLED,t.toString()},o._updateColorTransition=function(t){var e,i=this[t+"Color"],o=null===(e=this.target)||void 0===e?void 0:e.getComponent(vt);o&&(t===me.DISABLED?o.color=i:(this._fromColor=o.color.clone(),this._toColor=i,this._time=0,this._transitionFinished=!1))},o._updateSpriteTransition=function(t){var e=this[t+"Sprite"];this._sprite&&e&&(this._sprite.spriteFrame=e)},o._updateScaleTransition=function(t){this._interactable&&(t===me.PRESSED?this._zoomUp():this._zoomBack())},o._zoomUp=function(){this._originalScale&&(c.copy(this._fromScale,this._originalScale),c.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._time=0,this._transitionFinished=!1)},o._zoomBack=function(){this.target&&this._originalScale&&(c.copy(this._fromScale,this.target.getScale()),c.copy(this._toScale,this._originalScale),this._time=0,this._transitionFinished=!1)},o._applyTransition=function(t){var e=this._transition;e===Te.COLOR?this._updateColorTransition(t):e===Te.SPRITE?this._updateSpriteTransition(t):e===Te.SCALE&&this._updateScaleTransition(t)},_(i,[{key:"target",get:function(){return this._target||this.node},set:function(t){this._target!==t&&(this._target&&this._unregisterTargetEvent(this._target),this._target=t,this._applyTarget())}},{key:"interactable",get:function(){return this._interactable},set:function(t){this._interactable=t,this._updateState(),this._interactable||this._resetState()}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"transition",get:function(){return this._transition},set:function(t){this._transition!==t&&(this._transition===Te.COLOR?this._updateColorTransition(me.NORMAL):this._transition===Te.SPRITE&&this._updateSpriteTransition(me.NORMAL),this._transition=t,this._updateState())}},{key:"normalColor",get:function(){return this._normalColor},set:function(t){this._normalColor!==t&&(this._normalColor.set(t),this._updateState())}},{key:"pressedColor",get:function(){return this._pressedColor},set:function(t){this._pressedColor!==t&&this._pressedColor.set(t)}},{key:"hoverColor",get:function(){return this._hoverColor},set:function(t){this._hoverColor!==t&&this._hoverColor.set(t)}},{key:"disabledColor",get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor.set(t),this._updateState())}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration!==t&&(this._duration=t)}},{key:"zoomScale",get:function(){return this._zoomScale},set:function(t){this._zoomScale!==t&&(this._zoomScale=t)}},{key:"normalSprite",get:function(){return this._normalSprite},set:function(t){if(this._normalSprite!==t){this._normalSprite=t;var e=this.node.getComponent(yt);e&&(e.spriteFrame=t),this._updateState()}}},{key:"pressedSprite",get:function(){return this._pressedSprite},set:function(t){this._pressedSprite!==t&&(this._pressedSprite=t,this._updateState())}},{key:"hoverSprite",get:function(){return this._hoverSprite},set:function(t){this._hoverSprite!==t&&(this._hoverSprite=t,this._updateState())}},{key:"disabledSprite",get:function(){return this._disabledSprite},set:function(t){this._disabledSprite!==t&&(this._disabledSprite=t,this._updateState())}}]),i}(E),ye.Transition=Te,ye.EventType=ve,p((ie=be).prototype,"target",[Lt,Dt,Pt],Object.getOwnPropertyDescriptor(ie.prototype,"target"),ie.prototype),p(ie.prototype,"interactable",[zt,It],Object.getOwnPropertyDescriptor(ie.prototype,"interactable"),ie.prototype),p(ie.prototype,"transition",[Rt,xt,Bt],Object.getOwnPropertyDescriptor(ie.prototype,"transition"),ie.prototype),p(ie.prototype,"normalColor",[Nt],Object.getOwnPropertyDescriptor(ie.prototype,"normalColor"),ie.prototype),p(ie.prototype,"pressedColor",[Ht],Object.getOwnPropertyDescriptor(ie.prototype,"pressedColor"),ie.prototype),p(ie.prototype,"hoverColor",[Mt],Object.getOwnPropertyDescriptor(ie.prototype,"hoverColor"),ie.prototype),p(ie.prototype,"disabledColor",[kt],Object.getOwnPropertyDescriptor(ie.prototype,"disabledColor"),ie.prototype),p(ie.prototype,"duration",[Vt,Ft,jt],Object.getOwnPropertyDescriptor(ie.prototype,"duration"),ie.prototype),p(ie.prototype,"zoomScale",[Gt],Object.getOwnPropertyDescriptor(ie.prototype,"zoomScale"),ie.prototype),p(ie.prototype,"normalSprite",[Ut,Wt],Object.getOwnPropertyDescriptor(ie.prototype,"normalSprite"),ie.prototype),p(ie.prototype,"pressedSprite",[Zt,Yt],Object.getOwnPropertyDescriptor(ie.prototype,"pressedSprite"),ie.prototype),p(ie.prototype,"hoverSprite",[Xt,qt],Object.getOwnPropertyDescriptor(ie.prototype,"hoverSprite"),ie.prototype),p(ie.prototype,"disabledSprite",[Kt,Qt],Object.getOwnPropertyDescriptor(ie.prototype,"disabledSprite"),ie.prototype),oe=p(ie.prototype,"clickEvents",[Jt,O,$t,te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=p(ie.prototype,"_interactable",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),re=p(ie.prototype,"_transition",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Te.NONE}}),se=p(ie.prototype,"_normalColor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.WHITE.clone()}}),ae=p(ie.prototype,"_hoverColor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e(211,211,211,255)}}),he=p(ie.prototype,"_pressedColor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.WHITE.clone()}}),le=p(ie.prototype,"_disabledColor",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e(124,124,124,255)}}),ce=p(ie.prototype,"_normalSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=p(ie.prototype,"_hoverSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=p(ie.prototype,"_pressedSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=p(ie.prototype,"_disabledSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=p(ie.prototype,"_duration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),ge=p(ie.prototype,"_zoomScale",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),fe=p(ie.prototype,"_target",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=ie))||ee)||ee)||ee)||ee)||ee)||ee,t({Button:Se,ButtonComponent:Se}),Se),Le=function(){function t(){}return t.add=function(t){var e=this._tabIndexList;-1===e.indexOf(t)&&e.push(t)},t.remove=function(t){var e=this._tabIndexList,i=e.indexOf(t);-1!==i&&e.splice(i,1)},t.resort=function(){this._tabIndexList.sort((function(t,e){return t._delegate.tabIndex-e._delegate.tabIndex}))},t.next=function(t){var e=this._tabIndexList,i=e.indexOf(t);if(t.setFocus(!1),-1!==i){var o=e[i+1];o&&o._delegate.tabIndex>=0&&o.setFocus(!0)}},t}();Le._tabIndexList=[],function(t){t[t.DEFAULT=0]="DEFAULT",t[t.DONE=1]="DONE",t[t.SEND=2]="SEND",t[t.SEARCH=3]="SEARCH",t[t.GO=4]="GO",t[t.NEXT=5]="NEXT"}(Ee||(Ee={})),A(Ee),function(t){t[t.ANY=0]="ANY",t[t.EMAIL_ADDR=1]="EMAIL_ADDR",t[t.NUMERIC=2]="NUMERIC",t[t.PHONE_NUMBER=3]="PHONE_NUMBER",t[t.URL=4]="URL",t[t.DECIMAL=5]="DECIMAL",t[t.SINGLE_LINE=6]="SINGLE_LINE"}(Oe||(Oe={})),A(Oe),function(t){t[t.PASSWORD=0]="PASSWORD",t[t.SENSITIVE=1]="SENSITIVE",t[t.INITIAL_CAPS_WORD=2]="INITIAL_CAPS_WORD",t[t.INITIAL_CAPS_SENTENCE=3]="INITIAL_CAPS_SENTENCE",t[t.INITIAL_CAPS_ALL_CHARACTERS=4]="INITIAL_CAPS_ALL_CHARACTERS",t[t.DEFAULT=5]="DEFAULT"}(Ae||(Ae={})),A(Ae);var De,Pe,ze,Ie,Re,xe,Be,Ne,He,Me,ke,Ve,Fe,je,Ge,Ue,We,Ze,Ye,Xe,qe,Ke,Qe,Je,$e,ti,ei,ii,oi,ni,ri,si,ai,hi,li,ci,ui,_i,pi,di,gi,fi,yi,bi,Ti,mi,vi,Ci,Si,Ei,Oi,Ai,wi,Li,Di,Pi,zi,Ii,Ri,xi,Bi,Ni=function(){function t(){this._editing=!1,this._delegate=null}var e=t.prototype;return e.init=function(){},e.onEnable=function(){},e.update=function(){},e.onDisable=function(){this._editing&&this.endEditing()},e.clear=function(){this._delegate=null},e.setTabIndex=function(){},e.setSize=function(){},e.setFocus=function(t){t?this.beginEditing():this.endEditing()},e.isFocused=function(){return this._editing},e.beginEditing=function(){},e.endEditing=function(){},t}(),Hi=new w,Mi=new w,ki=new c,Vi=null,Fi=0,ji=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._delegate=null,e._inputMode=-1,e._inputFlag=-1,e._returnType=-1,e.__eventListeners={},e.__autoResize=!1,e.__orientationChanged=void 0,e._edTxt=null,e._isTextArea=!1,e._textLabelFont=null,e._textLabelFontSize=null,e._textLabelFontColor=null,e._textLabelAlign=null,e._placeholderLabelFont=null,e._placeholderLabelFontSize=null,e._placeholderLabelFontColor=null,e._placeholderLabelAlign=null,e._placeholderLineHeight=null,e._placeholderStyleSheet=null,e._domId="EditBoxId_"+ ++Fi,e}a(e,t);var i=e.prototype;return i.init=function(t){t&&(this._delegate=t,t.inputMode===Oe.ANY?this._createTextArea():this._createInput(),Le.add(this),this.setTabIndex(t.tabIndex),this._initStyleSheet(),this._registerEventListeners(),this._addDomToGameContainer(),this.__autoResize=lt._resizeWithBrowserSize)},i.clear=function(){this._removeEventListeners(),this._removeDomFromGameContainer(),Le.remove(this),Vi===this&&(Vi=null),this._delegate=null},i.update=function(){this._updateMatrix()},i.setTabIndex=function(t){this._edTxt.tabIndex=t,Le.resort()},i.setSize=function(t,e){var i=this._edTxt;i&&(i.style.width=t+"px",i.style.height=e+"px")},i.beginEditing=function(){Vi&&Vi!==this&&Vi.setFocus(!1),this._editing=!0,Vi=this,this._delegate._editBoxEditingDidBegan(),this._showDom(),this._edTxt.focus()},i.endEditing=function(){this._edTxt.blur()},i._createInput=function(){this._isTextArea=!1,this._edTxt=document.createElement("input")},i._createTextArea=function(){this._isTextArea=!0,this._edTxt=document.createElement("textarea")},i._addDomToGameContainer=function(){L.GAME_VIEW&&this._edTxt?(L.gameView.container.appendChild(this._edTxt),L.gameView.head.appendChild(this._placeholderStyleSheet)):ct.container&&this._edTxt&&(ct.container.appendChild(this._edTxt),document.head.appendChild(this._placeholderStyleSheet))},i._removeDomFromGameContainer=function(){(L.GAME_VIEW?D(L.gameView.container,this._edTxt):D(ct.container,this._edTxt))&&this._edTxt&&(L.GAME_VIEW?L.gameView.container.removeChild(this._edTxt):ct.container.removeChild(this._edTxt)),(L.GAME_VIEW?D(L.gameView.head,this._placeholderStyleSheet):D(document.head,this._placeholderStyleSheet))&&(L.GAME_VIEW?L.gameView.head.removeChild(this._placeholderStyleSheet):document.head.removeChild(this._placeholderStyleSheet)),this._edTxt=null,this._placeholderStyleSheet=null},i._showDom=function(){this._updateMaxLength(),this._updateInputType(),this._updateStyleSheet(),this._edTxt&&this._delegate&&(this._edTxt.style.display="",this._delegate._hideLabels()),P.isMobile&&this._showDomOnMobile()},i._hideDom=function(){var t=this._edTxt;t&&this._delegate&&(t.style.display="none",this._delegate._showLabels()),P.isMobile&&this._hideDomOnMobile()},i._showDomOnMobile=function(){P.os!==z.ANDROID&&P.os!==z.OHOS||(this.__autoResize&&lt.resizeWithBrowserSize(!1),this._adjustWindowScroll())},i._hideDomOnMobile=function(){P.os!==z.ANDROID&&P.os!==z.OHOS||this.__autoResize&&lt.resizeWithBrowserSize(!0),this._scrollBackWindow()},i._adjustWindowScroll=function(){var t=this;setTimeout((function(){window.scrollY<40&&t._edTxt.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}),400)},i._scrollBackWindow=function(){setTimeout((function(){P.browserType!==I.WECHAT||P.os!==z.IOS?window.scrollTo(0,0):window.top&&window.top.scrollTo(0,0)}),400)},i._updateMatrix=function(){if(this._edTxt){var t=this._delegate.node,e=lt.getScaleX(),i=lt.getScaleY(),o=1,n=1;L.GAME_VIEW&&(o=L.gameView.canvas.width/L.game.canvas.width,n=L.gameView.canvas.height/L.game.canvas.height),e*=o,i*=n;var r=lt.getViewportRect(),s=lt.getDevicePixelRatio();t.getWorldMatrix(Hi);var a=t._uiProps.uiTransformComp;if(a&&c.set(ki,-a.anchorX*a.width,-a.anchorY*a.height,ki.z),w.transform(Hi,Hi,ki),t._uiProps.uiTransformComp){var h=at.root.batcher2D.getFirstRenderCamera(t);if(h){h.node.getWorldRT(Mi);var l=Mi.m12,u=Mi.m13,_=_t.center;Mi.m12=_.x-(Mi.m00*l+Mi.m04*u),Mi.m13=_.y-(Mi.m01*l+Mi.m05*u),w.multiply(Mi,Mi,Hi),e/=s,i/=s;var p=L.GAME_VIEW?L.gameView.container:ct.container,d=Mi.m00*e,g=Hi.m01,f=Hi.m04,y=Mi.m05*i,b=parseInt(p&&p.style.paddingLeft||"0");b+=r.x*o/s;var T=parseInt(p&&p.style.paddingBottom||"0");T+=r.y/s;var m="matrix("+d+","+-g+","+-f+","+y+","+(Mi.m12*e+b)+","+-(Mi.m13*i+T)+")";this._edTxt.style.transform=m,this._edTxt.style["-webkit-transform"]=m,this._edTxt.style["transform-origin"]="0px 100% 0px",this._edTxt.style["-webkit-transform-origin"]="0px 100% 0px"}}}},i._updateInputType=function(){var t=this._delegate,e=t.inputMode,i=t.inputFlag,o=t.returnType,n=this._edTxt;if(this._inputMode!==e||this._inputFlag!==i||this._returnType!==o){if(this._inputMode=e,this._inputFlag=i,this._returnType=o,this._isTextArea){var r="none";return i===Ae.INITIAL_CAPS_ALL_CHARACTERS?r="uppercase":i===Ae.INITIAL_CAPS_WORD&&(r="capitalize"),void(n.style.textTransform=r)}if(n=n,i===Ae.PASSWORD)return n.type="password",void(n.style.textTransform="none");var s=n.type;e===Oe.EMAIL_ADDR?s="email":e===Oe.NUMERIC||e===Oe.DECIMAL?s="number":e===Oe.PHONE_NUMBER?(s="number",n.pattern="[0-9]*"):e===Oe.URL?s="url":(s="text",o===Ee.SEARCH&&(s="search")),n.type=s;var a="none";i===Ae.INITIAL_CAPS_ALL_CHARACTERS?a="uppercase":i===Ae.INITIAL_CAPS_WORD&&(a="capitalize"),n.style.textTransform=a}},i._updateMaxLength=function(){var t=this._delegate.maxLength;t<0&&(t=65535),this._edTxt.maxLength=t},i._initStyleSheet=function(){if(this._edTxt){var t=this._edTxt;t.style.color="#000000",t.style.border="0px",t.style.background="transparent",t.style.width="100%",t.style.height="100%",t.style.outline="medium",t.style.padding="0",t.style.textTransform="none",t.style.display="none",t.style.position="absolute",t.style.bottom="0px",t.style.left="2px",t.className="cocosEditBox",t.style.fontFamily="Arial",t.id=this._domId,this._isTextArea?(t.style.resize="none",t.style.overflowY="scroll"):((t=t).type="text",t.style["-moz-appearance"]="textfield"),this._placeholderStyleSheet=document.createElement("style")}},i._updateStyleSheet=function(){var t=this._delegate,e=this._edTxt;e&&t&&(e.value=t.string,e.placeholder=t.placeholder,this._updateTextLabel(t.textLabel),this._updatePlaceholderLabel(t.placeholderLabel))},i._updateTextLabel=function(t){if(t){var e=t.font;e=!e||e instanceof bt?t.fontFamily:e._fontFamily;var i=t.fontSize*t.node.scale.y;if((this._textLabelFont!==e||this._textLabelFontSize!==i||this._textLabelFontColor!==t.fontColor||this._textLabelAlign!==t.horizontalAlign)&&(this._textLabelFont=e,this._textLabelFontSize=i,this._textLabelFontColor=t.fontColor,this._textLabelAlign=t.horizontalAlign,this._edTxt)){var o=this._edTxt;switch(o.style.fontSize=i+"px",o.style.color=t.color.toCSS(),o.style.fontFamily=e,t.horizontalAlign){case Tt.HorizontalAlign.LEFT:o.style.textAlign="left";break;case Tt.HorizontalAlign.CENTER:o.style.textAlign="center";break;case Tt.HorizontalAlign.RIGHT:o.style.textAlign="right"}}}},i._updatePlaceholderLabel=function(t){if(t){var e=t.font;e=!e||e instanceof bt?t.fontFamily:t.font._fontFamily;var i=t.fontSize*t.node.scale.y;if(this._placeholderLabelFont!==e||this._placeholderLabelFontSize!==i||this._placeholderLabelFontColor!==t.fontColor||this._placeholderLabelAlign!==t.horizontalAlign||this._placeholderLineHeight!==t.fontSize){this._placeholderLabelFont=e,this._placeholderLabelFontSize=i,this._placeholderLabelFontColor=t.fontColor,this._placeholderLabelAlign=t.horizontalAlign,this._placeholderLineHeight=t.fontSize;var o=this._placeholderStyleSheet,n=t.color.toCSS(),r=t.fontSize,s="";switch(t.horizontalAlign){case Tt.HorizontalAlign.LEFT:s="left";break;case Tt.HorizontalAlign.CENTER:s="center";break;case Tt.HorizontalAlign.RIGHT:s="right"}o.innerHTML="#"+this._domId+"::-webkit-input-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}#"+this._domId+"::-moz-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}#"+this._domId+"::-ms-input-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}",P.browserType===I.EDGE&&(o.innerHTML+="#"+this._domId+"::-ms-clear{display: none;}")}}},i._registerEventListeners=function(){var t=this;if(this._edTxt){var e=this._edTxt,i=!1,o=this.__eventListeners;o.compositionStart=function(){i=!0},o.compositionEnd=function(){i=!1,t._delegate._editBoxTextChanged(e.value)},o.onInput=function(){if(!i){var o=t._delegate,n=o.maxLength;n>=0&&(e.value=e.value.slice(0,n)),o._editBoxTextChanged(e.value)}},o.onClick=function(){t._editing&&P.isMobile&&t._adjustWindowScroll()},o.onKeydown=function(i){i.keyCode===ut.ENTER?(i.propagationStopped=!0,t._delegate._editBoxEditingReturn(),t._isTextArea||e.blur()):i.keyCode===ut.TAB&&(i.propagationStopped=!0,i.preventDefault(),Le.next(t))},o.onBlur=function(){P.isMobile&&i&&o.compositionEnd(),t._editing=!1,Vi=null,t._hideDom(),t._delegate._editBoxEditingDidEnded()},e.addEventListener("compositionstart",o.compositionStart),e.addEventListener("compositionend",o.compositionEnd),e.addEventListener("input",o.onInput),e.addEventListener("keydown",o.onKeydown),e.addEventListener("blur",o.onBlur),e.addEventListener("touchstart",o.onClick)}},i._removeEventListeners=function(){if(this._edTxt){var t=this._edTxt,e=this.__eventListeners;t.removeEventListener("compositionstart",e.compositionStart),t.removeEventListener("compositionend",e.compositionEnd),t.removeEventListener("input",e.onInput),t.removeEventListener("keydown",e.onKeydown),t.removeEventListener("blur",e.onBlur),t.removeEventListener("touchstart",e.onClick),e.compositionStart=null,e.compositionEnd=null,e.onInput=null,e.onKeydown=null,e.onBlur=null,e.onClick=null}},e}(Ni);!function(t){t.EDITING_DID_BEGAN="editing-did-began",t.EDITING_DID_ENDED="editing-did-ended",t.TEXT_CHANGED="text-changed",t.EDITING_RETURN="editing-return"}(Bi||(Bi={}));var Gi,Ui,Wi,Zi,Yi,Xi,qi,Ki,Qi,Ji,$i,to,eo,io,oo,no,ro,so,ao,ho,lo,co,uo,_o,po,go,fo,yo,bo,To,mo,vo,Co,So,Eo,Oo,Ao,wo,Lo,Do,Po,zo,Io,Ro,xo,Bo,No,Ho,Mo,ko,Vo,Fo,jo,Go,Uo,Wo,Zo,Yo,Xo,qo,Ko=function(e){return t({EditBox:e,EditBoxComponent:e}),e}((De=o("cc.EditBox"),Pe=d(),ze=g(110),Ie=f(),Re=y(Ct),xe=b(),Be=T(),Ne=b(),He=T(),Me=n(Tt),ke=b(),Ve=T(),Fe=n(Tt),je=b(),Ge=T(),Ue=n(ft),We=b(),Ze=T(),Ye=n(Ae),Xe=b(),qe=T(),Ke=n(Oe),Qe=b(),Je=T(),$e=n(Ee),ti=b(),ei=T(),ii=b(),oi=T(),ni=b(),ri=T(),si=n([st]),ai=b(),hi=T(),li=n([st]),ci=b(),ui=T(),_i=n([st]),pi=b(),di=T(),gi=n([st]),fi=b(),yi=T(),De(bi=Pe(bi=ze(bi=Ie(bi=Re(bi=s((xi=Ri=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"editingDidBegan",mi,S(e)),C(e,"textChanged",vi,S(e)),C(e,"editingDidEnded",Ci,S(e)),C(e,"editingReturn",Si,S(e)),e._impl=null,e._background=null,C(e,"_textLabel",Ei,S(e)),C(e,"_placeholderLabel",Oi,S(e)),C(e,"_returnType",Ai,S(e)),C(e,"_string",wi,S(e)),C(e,"_tabIndex",Li,S(e)),C(e,"_backgroundImage",Di,S(e)),C(e,"_inputFlag",Pi,S(e)),C(e,"_inputMode",zi,S(e)),C(e,"_maxLength",Ii,S(e)),e._isLabelVisible=!1,e}a(e,t);var i=e.prototype;return i.__preload=function(){this._init()},i.onEnable=function(){this._registerEvent(),this._impl&&this._impl.onEnable()},i.update=function(){this._impl&&this._impl.update()},i.onDisable=function(){this._unregisterEvent(),this._impl&&this._impl.onDisable()},i.onDestroy=function(){this._impl&&this._impl.clear()},i.setFocus=function(){this._impl&&this._impl.setFocus(!0)},i.focus=function(){this._impl&&this._impl.setFocus(!0)},i.blur=function(){this._impl&&this._impl.setFocus(!1)},i.isFocused=function(){return!!this._impl&&this._impl.isFocused()},i._editBoxEditingDidBegan=function(){st.emitEvents(this.editingDidBegan,this),this.node.emit(Bi.EDITING_DID_BEGAN,this)},i._editBoxEditingDidEnded=function(){st.emitEvents(this.editingDidEnded,this),this.node.emit(Bi.EDITING_DID_ENDED,this)},i._editBoxTextChanged=function(t){t=this._updateLabelStringStyle(t,!0),this.string=t,st.emitEvents(this.textChanged,t,this),this.node.emit(Bi.TEXT_CHANGED,this)},i._editBoxEditingReturn=function(){st.emitEvents(this.editingReturn,this),this.node.emit(Bi.EDITING_RETURN,this)},i._showLabels=function(){this._isLabelVisible=!0,this._updateLabels()},i._hideLabels=function(){this._isLabelVisible=!1,this._textLabel&&(this._textLabel.node.active=!1),this._placeholderLabel&&(this._placeholderLabel.node.active=!1)},i._onTouchBegan=function(t){t.propagationStopped=!0},i._onTouchCancel=function(t){t.propagationStopped=!0},i._onTouchEnded=function(t){this._impl&&this._impl.beginEditing(),t.propagationStopped=!0},i._init=function(){this._createBackgroundSprite(),this._updatePlaceholderLabel(),this._updateTextLabel(),this._isLabelVisible=!0,this.node.on(l.SIZE_CHANGED,this._resizeChildNodes,this),(this._impl=new e._EditBoxImpl).init(this),this._updateString(this._string),this._syncSize()},i._createBackgroundSprite=function(){this._background||(this._background=this.node.getComponent(yt),this._background||(this._background=this.node.addComponent(yt))),this._background.type=yt.Type.SLICED,this._background.spriteFrame=this._backgroundImage},i._updateTextLabel=function(){var t=this._textLabel;if(!t){var e=this.node.getChildByName("TEXT_LABEL");e||(e=new r("TEXT_LABEL")),(t=e.getComponent(Tt))||(t=e.addComponent(Tt)),e.parent=this.node,this._textLabel=t}this._textLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),t.overflow=Tt.Overflow.CLAMP,this._inputMode===Oe.ANY?(t.verticalAlign=mt.TOP,t.enableWrapText=!0):t.enableWrapText=!1,t.string=this._updateLabelStringStyle(this._string)},i._updatePlaceholderLabel=function(){var t=this._placeholderLabel;if(!t){var e=this.node.getChildByName("PLACEHOLDER_LABEL");e||(e=new r("PLACEHOLDER_LABEL")),(t=e.getComponent(Tt))||(t=e.addComponent(Tt)),e.parent=this.node,this._placeholderLabel=t}this._placeholderLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),t.overflow=Tt.Overflow.CLAMP,this._inputMode===Oe.ANY?(t.verticalAlign=mt.TOP,t.enableWrapText=!0):t.enableWrapText=!1,t.string=this.placeholder},i._syncSize=function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(this._background){var i=this._background.node._uiProps.uiTransformComp;i.anchorPoint=t.anchorPoint,i.setContentSize(e)}this._updateLabelPosition(e),this._impl&&this._impl.setSize(e.width,e.height)},i._updateLabels=function(){if(this._isLabelVisible){var t=this._string;this._textLabel&&(this._textLabel.node.active=""!==t),this._placeholderLabel&&(this._placeholderLabel.node.active=""===t)}},i._updateString=function(t){var e=this._textLabel;if(e){var i=t;i&&(i=this._updateLabelStringStyle(i)),e.string=i,this._updateLabels()}},i._updateLabelStringStyle=function(t,e){void 0===e&&(e=!1);var i,o=this._inputFlag;if(e||o!==Ae.PASSWORD)o===Ae.INITIAL_CAPS_ALL_CHARACTERS?t=t.toUpperCase():o===Ae.INITIAL_CAPS_WORD?t=t.replace(/(?:^|\s)\S/g,(function(t){return t.toUpperCase()})):o===Ae.INITIAL_CAPS_SENTENCE&&(t=(i=t).charAt(0).toUpperCase()+i.slice(1));else{for(var n="",r=t.length,s=0;s<r;++s)n+="â—";t=n}return t},i._registerEvent=function(){this.node.on(l.TOUCH_START,this._onTouchBegan,this),this.node.on(l.TOUCH_END,this._onTouchEnded,this)},i._unregisterEvent=function(){this.node.off(l.TOUCH_START,this._onTouchBegan,this),this.node.off(l.TOUCH_END,this._onTouchEnded,this)},i._updateLabelPosition=function(t){var e=this.node._uiProps.uiTransformComp,i=-e.anchorX*e.width,o=-e.anchorY*e.height,n=this._placeholderLabel,r=this._textLabel;r&&(r.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),r.node.setPosition(i+2,o+t.height,r.node.position.z),this._inputMode===Oe.ANY&&(r.verticalAlign=mt.TOP),r.enableWrapText=this._inputMode===Oe.ANY),n&&(n.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),n.lineHeight=t.height,n.node.setPosition(i+2,o+t.height,n.node.position.z),this._inputMode===Oe.ANY&&(n.verticalAlign=mt.TOP),n.enableWrapText=this._inputMode===Oe.ANY)},i._resizeChildNodes=function(){var t=this.node._uiProps.uiTransformComp,e=this._textLabel&&this._textLabel.node;e&&(e.setPosition(-t.width/2,t.height/2,e.position.z),e._uiProps.uiTransformComp.setContentSize(t.contentSize));var i=this._placeholderLabel&&this._placeholderLabel.node;i&&(i.setPosition(-t.width/2,t.height/2,i.position.z),i._uiProps.uiTransformComp.setContentSize(t.contentSize));var o=this._background&&this._background.node;o&&o._uiProps.uiTransformComp.setContentSize(t.contentSize)},_(e,[{key:"string",get:function(){return this._string},set:function(t){this._maxLength>=0&&t.length>=this._maxLength&&(t=t.slice(0,this._maxLength)),this._string=t,this._updateString(t)}},{key:"placeholder",get:function(){return this._placeholderLabel?this._placeholderLabel.string:""},set:function(t){this._placeholderLabel&&(this._placeholderLabel.string=t)}},{key:"textLabel",get:function(){return this._textLabel},set:function(t){this._textLabel!==t&&(this._textLabel=t,this._textLabel&&(this._updateTextLabel(),this._updateLabels()))}},{key:"placeholderLabel",get:function(){return this._placeholderLabel},set:function(t){this._placeholderLabel!==t&&(this._placeholderLabel=t,this._placeholderLabel&&(this._updatePlaceholderLabel(),this._updateLabels()))}},{key:"backgroundImage",get:function(){return this._backgroundImage},set:function(t){this._backgroundImage!==t&&(this._backgroundImage=t,this._createBackgroundSprite())}},{key:"inputFlag",get:function(){return this._inputFlag},set:function(t){this._inputFlag=t,this._updateString(this._string)}},{key:"inputMode",get:function(){return this._inputMode},set:function(t){this._inputMode!==t&&(this._inputMode=t,this._updateTextLabel(),this._updatePlaceholderLabel())}},{key:"returnType",get:function(){return this._returnType},set:function(t){this._returnType=t}},{key:"maxLength",get:function(){return this._maxLength},set:function(t){this._maxLength=t}},{key:"tabIndex",get:function(){return this._tabIndex},set:function(t){this._tabIndex!==t&&(this._tabIndex=t,this._impl&&this._impl.setTabIndex(t))}}]),e}(E),Ri._EditBoxImpl=Ni,Ri.KeyboardReturnType=Ee,Ri.InputFlag=Ae,Ri.InputMode=Oe,Ri.EventType=Bi,p((Ti=xi).prototype,"string",[xe,Be],Object.getOwnPropertyDescriptor(Ti.prototype,"string"),Ti.prototype),p(Ti.prototype,"placeholder",[Ne,He],Object.getOwnPropertyDescriptor(Ti.prototype,"placeholder"),Ti.prototype),p(Ti.prototype,"textLabel",[Me,ke,Ve],Object.getOwnPropertyDescriptor(Ti.prototype,"textLabel"),Ti.prototype),p(Ti.prototype,"placeholderLabel",[Fe,je,Ge],Object.getOwnPropertyDescriptor(Ti.prototype,"placeholderLabel"),Ti.prototype),p(Ti.prototype,"backgroundImage",[Ue,We,Ze],Object.getOwnPropertyDescriptor(Ti.prototype,"backgroundImage"),Ti.prototype),p(Ti.prototype,"inputFlag",[Ye,Xe,qe],Object.getOwnPropertyDescriptor(Ti.prototype,"inputFlag"),Ti.prototype),p(Ti.prototype,"inputMode",[Ke,Qe,Je],Object.getOwnPropertyDescriptor(Ti.prototype,"inputMode"),Ti.prototype),p(Ti.prototype,"returnType",[$e,ti,ei],Object.getOwnPropertyDescriptor(Ti.prototype,"returnType"),Ti.prototype),p(Ti.prototype,"maxLength",[ii,oi],Object.getOwnPropertyDescriptor(Ti.prototype,"maxLength"),Ti.prototype),p(Ti.prototype,"tabIndex",[ni,ri],Object.getOwnPropertyDescriptor(Ti.prototype,"tabIndex"),Ti.prototype),mi=p(Ti.prototype,"editingDidBegan",[si,O,ai,hi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vi=p(Ti.prototype,"textChanged",[li,O,ci,ui],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ci=p(Ti.prototype,"editingDidEnded",[_i,O,pi,di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Si=p(Ti.prototype,"editingReturn",[gi,O,fi,yi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ei=p(Ti.prototype,"_textLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oi=p(Ti.prototype,"_placeholderLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ai=p(Ti.prototype,"_returnType",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ee.DEFAULT}}),wi=p(Ti.prototype,"_string",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Li=p(Ti.prototype,"_tabIndex",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Di=p(Ti.prototype,"_backgroundImage",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pi=p(Ti.prototype,"_inputFlag",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ae.DEFAULT}}),zi=p(Ti.prototype,"_inputMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oe.ANY}}),Ii=p(Ti.prototype,"_maxLength",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),bi=Ti))||bi)||bi)||bi)||bi)||bi)||bi));"object"!=typeof window||"object"!=typeof document||R||x||B||(Ko._EditBoxImpl=ji),function(t){t[t.NONE=0]="NONE",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL",t[t.GRID=3]="GRID"}(Uo||(Uo={})),i(Uo),function(t){t[t.NONE=0]="NONE",t[t.CONTAINER=1]="CONTAINER",t[t.CHILDREN=2]="CHILDREN"}(Wo||(Wo={})),i(Wo),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(Zo||(Zo={})),i(Zo),function(t){t[t.BOTTOM_TO_TOP=0]="BOTTOM_TO_TOP",t[t.TOP_TO_BOTTOM=1]="TOP_TO_BOTTOM"}(Yo||(Yo={})),i(Yo),function(t){t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT"}(Xo||(Xo={})),i(Xo),function(t){t[t.NONE=0]="NONE",t[t.FIXED_ROW=1]="FIXED_ROW",t[t.FIXED_COL=2]="FIXED_COL"}(qo||(qo={})),i(qo);var Qo,Jo,$o,tn,en,on,nn,rn,sn,an,hn,ln,cn,un,_n,pn,dn,gn,fn,yn,bn,Tn,mn,vn=new c,Cn=function(e){return t({Layout:e,LayoutComponent:e}),e}((Gi=o("cc.Layout"),Ui=d(),Wi=g(110),Zi=f(),Yi=y(Ct),Xi=H(),qi=T(),Ki=H(),Qi=T(),Ji=n(Uo),$i=T(),to=n(Wo),eo=H(),io=T(),oo=H(),no=T(),ro=n(Zo),so=T(),ao=T(),ho=T(),lo=T(),co=T(),uo=T(),_o=T(),po=n(Yo),go=T(),fo=n(Xo),yo=T(),bo=n(qo),To=H(),mo=T(),vo=H(),Co=T(),So=T(),Gi(Eo=Ui(Eo=Wi(Eo=Zi(Eo=Yi(Eo=s((Go=jo=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"_resizeMode",Ao,S(e)),C(e,"_layoutType",wo,S(e)),C(e,"_cellSize",Lo,S(e)),C(e,"_startAxis",Do,S(e)),C(e,"_paddingLeft",Po,S(e)),C(e,"_paddingRight",zo,S(e)),C(e,"_paddingTop",Io,S(e)),C(e,"_paddingBottom",Ro,S(e)),C(e,"_spacingX",xo,S(e)),C(e,"_spacingY",Bo,S(e)),C(e,"_verticalDirection",No,S(e)),C(e,"_horizontalDirection",Ho,S(e)),C(e,"_constraint",Mo,S(e)),C(e,"_constraintNum",ko,S(e)),C(e,"_affectedByScale",Vo,S(e)),C(e,"_isAlign",Fo,S(e)),e._layoutSize=new N(300,200),e._layoutDirty=!0,e._childrenDirty=!1,e._usefulLayoutObj=[],e._init=!1,e}a(e,t);var i=e.prototype;return i.updateLayout=function(t){void 0===t&&(t=!1),(this._layoutDirty||t)&&this.node.children.length>0&&(this._doLayout(),this._layoutDirty=!1)},i.onEnable=function(){this._addEventListeners();var t=this.node._uiProps.uiTransformComp;t.contentSize.equals(N.ZERO)&&t.setContentSize(this._layoutSize),this._childrenChanged()},i.onDisable=function(){this._usefulLayoutObj.length=0,this._removeEventListeners()},i._checkUsefulObj=function(){this._usefulLayoutObj.length=0;for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e],o=i._uiProps.uiTransformComp;i.activeInHierarchy&&o&&this._usefulLayoutObj.push(o)}},i._addEventListeners=function(){at.on(ht.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.on(l.SIZE_CHANGED,this._resized,this),this.node.on(l.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.on(l.CHILD_ADDED,this._childAdded,this),this.node.on(l.CHILD_REMOVED,this._childRemoved,this),this.node.on(l.SIBLING_ORDER_CHANGED,this._childrenChanged,this),this.node.on("childrenSiblingOrderChanged",this.updateLayout,this),this._addChildrenEventListeners()},i._removeEventListeners=function(){at.off(ht.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.off(l.SIZE_CHANGED,this._resized,this),this.node.off(l.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.off(l.CHILD_ADDED,this._childAdded,this),this.node.off(l.CHILD_REMOVED,this._childRemoved,this),this.node.off(l.SIBLING_ORDER_CHANGED,this._childrenChanged,this),this.node.off("childrenSiblingOrderChanged",this.updateLayout,this),this._removeChildrenEventListeners()},i._addChildrenEventListeners=function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.on(l.SIZE_CHANGED,this._doLayoutDirty,this),i.on(l.TRANSFORM_CHANGED,this._transformDirty,this),i.on(l.ANCHOR_CHANGED,this._doLayoutDirty,this),i.on("active-in-hierarchy-changed",this._childrenChanged,this)}},i._removeChildrenEventListeners=function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.off(l.SIZE_CHANGED,this._doLayoutDirty,this),i.off(l.TRANSFORM_CHANGED,this._transformDirty,this),i.off(l.ANCHOR_CHANGED,this._doLayoutDirty,this),i.off("active-in-hierarchy-changed",this._childrenChanged,this)}},i._childAdded=function(t){t.on(l.SIZE_CHANGED,this._doLayoutDirty,this),t.on(l.TRANSFORM_CHANGED,this._transformDirty,this),t.on(l.ANCHOR_CHANGED,this._doLayoutDirty,this),t.on("active-in-hierarchy-changed",this._childrenChanged,this),this._childrenChanged()},i._childRemoved=function(t){t.off(l.SIZE_CHANGED,this._doLayoutDirty,this),t.off(l.TRANSFORM_CHANGED,this._transformDirty,this),t.off(l.ANCHOR_CHANGED,this._doLayoutDirty,this),t.off("active-in-hierarchy-changed",this._childrenChanged,this),this._childrenChanged()},i._resized=function(){this._layoutSize.set(this.node._uiProps.uiTransformComp.contentSize),this._doLayoutDirty()},i._doLayoutHorizontally=function(t,e,i,o){var n=this.node._uiProps.uiTransformComp.anchorPoint,r=this._getFixedBreakingNum(),s=1,a=this._paddingLeft;this._horizontalDirection===Xo.RIGHT_TO_LEFT&&(s=-1,a=this._paddingRight);var h=(this._horizontalDirection-n.x)*t+s*a,l=h-s*this._spacingX,c=0,u=0,_=0,p=0,d=!1,g=this._usefulLayoutObj.length,f=this._cellSize.width,y=this._getPaddingH();this._layoutType!==Uo.GRID&&this._resizeMode===Wo.CHILDREN&&(f=(t-y-(g-1)*this._spacingX)/g);for(var b=this._usefulLayoutObj,T=0;T<b.length;++T){var m=b[T],v=m.node,C=v.scale,S=this._getUsedScaleValue(C.x),E=this._getUsedScaleValue(C.y);this._resizeMode===Wo.CHILDREN&&(m.width=f/S,this._layoutType===Uo.GRID&&(m.height=this._cellSize.height/E));var O=Math.abs(this._horizontalDirection-m.anchorX),A=m.width*S,w=m.height*E;w>_&&(p=Math.max(_,p),u=_||w,_=w),l+=s*(O*A+this._spacingX);var L=s*(1-O)*A;if(e){if(r>0)(d=T/r>0&&T%r==0)&&(u=_>w?_:u);else if(A>t-y)l>h+s*O*A&&(d=!0);else{var D=(1-this._horizontalDirection-n.x)*t,P=l+L+s*(s>0?this._paddingRight:this._paddingLeft);d=Math.abs(P)>Math.abs(D)}d&&(l=h+s*O*A,w!==_&&(u=_),c+=u+this._spacingY,u=_=w)}var z=i(v,m,c);o&&v.setPosition(l,z),l+=L}return u=Math.max(u,_),Math.max(p,c+u)+this._getPaddingV()},i._doLayoutVertically=function(t,e,i,o){var n=this.node._uiProps.uiTransformComp.anchorPoint,r=this._getFixedBreakingNum(),s=1,a=this._paddingBottom;this._verticalDirection===Yo.TOP_TO_BOTTOM&&(s=-1,a=this._paddingTop);var h=(this._verticalDirection-n.y)*t+s*a,l=h-s*this._spacingY,c=0,u=0,_=0,p=0,d=!1,g=this._usefulLayoutObj.length,f=this._cellSize.height,y=this._getPaddingV();this._layoutType!==Uo.GRID&&this._resizeMode===Wo.CHILDREN&&(f=(t-y-(g-1)*this._spacingY)/g);for(var b=this._usefulLayoutObj,T=0;T<b.length;++T){var m=b[T],v=m.node,C=v.scale,S=this._getUsedScaleValue(C.x),E=this._getUsedScaleValue(C.y);this._resizeMode===Wo.CHILDREN&&(m.height=f/E,this._layoutType===Uo.GRID&&(m.width=this._cellSize.width/S));var O=Math.abs(this._verticalDirection-m.anchorY),A=m.width*S,w=m.height*E;A>c&&(u=Math.max(c,u),_=c||A,c=A),l+=s*(O*w+this._spacingY);var L=s*(1-O)*w;if(e){if(r>0)(d=T/r>0&&T%r==0)&&(_=c>w?c:_);else if(w>t-y)l>h+s*O*w&&(d=!0);else{var D=(1-this._verticalDirection-n.y)*t,P=l+L+s*(s>0?this._paddingTop:this._paddingBottom);d=Math.abs(P)>Math.abs(D)}d&&(l=h+s*O*w,A!==c&&(_=c),p+=_+this._spacingX,_=c=A)}var z=i(v,m,p);o&&(v.getPosition(vn),v.setPosition(z,l,vn.z)),l+=L}return _=Math.max(_,c),Math.max(u,p+_)+this._getPaddingH()},i._doLayoutGridAxisHorizontal=function(t,e){var i=this,o=e.width,n=1,r=-t.y*e.height,s=this._paddingBottom;this._verticalDirection===Yo.TOP_TO_BOTTOM&&(n=-1,r=(1-t.y)*e.height,s=this._paddingTop);var a=function(t,e,o){return r+n*(o+(1-e.anchorY)*e.height*i._getUsedScaleValue(t.scale.y)+s)},h=0;this._resizeMode===Wo.CONTAINER&&(h=this._doLayoutHorizontally(o,!0,a,!1),r=-t.y*h,this._verticalDirection===Yo.TOP_TO_BOTTOM&&(n=-1,r=(1-t.y)*h)),this._doLayoutHorizontally(o,!0,a,!0),this._resizeMode===Wo.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(o,h)},i._doLayoutGridAxisVertical=function(t,e){var i=this,o=e.height,n=1,r=-t.x*e.width,s=this._paddingLeft;this._horizontalDirection===Xo.RIGHT_TO_LEFT&&(n=-1,r=(1-t.x)*e.width,s=this._paddingRight);var a=function(t,e,o){return r+n*(o+(1-e.anchorX)*e.width*i._getUsedScaleValue(t.scale.x)+s)},h=0;this._resizeMode===Wo.CONTAINER&&(h=this._doLayoutVertically(o,!0,a,!1),r=-t.x*h,this._horizontalDirection===Xo.RIGHT_TO_LEFT&&(n=-1,r=(1-t.x)*h)),this._doLayoutVertically(o,!0,a,!0),this._resizeMode===Wo.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(h,o)},i._doLayoutGrid=function(){var t=this.node._uiProps.uiTransformComp,e=t.anchorPoint,i=t.contentSize;this.startAxis===Zo.HORIZONTAL?this._doLayoutGridAxisHorizontal(e,i):this.startAxis===Zo.VERTICAL&&this._doLayoutGridAxisVertical(e,i)},i._getHorizontalBaseWidth=function(){var t=this._usefulLayoutObj,e=0,i=t.length;if(this._resizeMode===Wo.CONTAINER){for(var o=0;o<t.length;++o){var n=t[o],r=n.node.scale;e+=n.width*this._getUsedScaleValue(r.x)}e+=(i-1)*this._spacingX+this._getPaddingH()}else e=this.node._uiProps.uiTransformComp.width;return e},i._getVerticalBaseHeight=function(){var t=this._usefulLayoutObj,e=0,i=t.length;if(this._resizeMode===Wo.CONTAINER){for(var o=0;o<t.length;++o){var n=t[o],r=n.node.scale;e+=n.height*this._getUsedScaleValue(r.y)}e+=(i-1)*this._spacingY+this._getPaddingV()}else e=this.node._uiProps.uiTransformComp.height;return e},i._doLayout=function(){var t=this;if(this._init&&!this._childrenDirty||(this._checkUsefulObj(),this._init=!0,this._childrenDirty=!1),this._layoutType===Uo.HORIZONTAL){var e=this._getHorizontalBaseWidth();this._doLayoutHorizontally(e,!1,(function(e){return(t._isAlign?c.ZERO:e.position).y}),!0),this.node._uiProps.uiTransformComp.width=e}else if(this._layoutType===Uo.VERTICAL){var i=this._getVerticalBaseHeight();this._doLayoutVertically(i,!1,(function(e){return(t._isAlign?c.ZERO:e.position).x}),!0),this.node._uiProps.uiTransformComp.height=i}else this._layoutType===Uo.GRID&&this._doLayoutGrid()},i._getUsedScaleValue=function(t){return this._affectedByScale?Math.abs(t):1},i._transformDirty=function(t){t&u.SCALE&&t&u.POSITION&&this._affectedByScale&&this._doLayoutDirty()},i._doLayoutDirty=function(){this._layoutDirty=!0},i._childrenChanged=function(){this._childrenDirty=!0,this._doLayoutDirty()},i._getPaddingH=function(){return this._paddingLeft+this._paddingRight},i._getPaddingV=function(){return this._paddingTop+this._paddingBottom},i._getFixedBreakingNum=function(){if(this._layoutType!==Uo.GRID||this._constraint===qo.NONE||this._constraintNum<=0)return 0;var t=this._constraint===qo.FIXED_ROW?Math.ceil(this._usefulLayoutObj.length/this._constraintNum):this._constraintNum;return this._startAxis===Zo.VERTICAL&&(t=this._constraint===qo.FIXED_COL?Math.ceil(this._usefulLayoutObj.length/this._constraintNum):this._constraintNum),t},_(e,[{key:"alignHorizontal",get:function(){return this._isAlign},set:function(t){this._layoutType===Uo.HORIZONTAL&&(this._isAlign=t,this._doLayoutDirty())}},{key:"alignVertical",get:function(){return this._isAlign},set:function(t){this._layoutType===Uo.VERTICAL&&(this._isAlign=t,this._doLayoutDirty())}},{key:"type",get:function(){return this._layoutType},set:function(t){this._layoutType=t,this._doLayoutDirty()}},{key:"resizeMode",get:function(){return this._resizeMode},set:function(t){this._layoutType!==Uo.NONE&&(this._resizeMode=t,this._doLayoutDirty())}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize.set(t),this._doLayoutDirty())}},{key:"startAxis",get:function(){return this._startAxis},set:function(t){this._startAxis!==t&&(this._startAxis=t,this._doLayoutDirty())}},{key:"paddingLeft",get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!==t&&(this._paddingLeft=t,this._doLayoutDirty())}},{key:"paddingRight",get:function(){return this._paddingRight},set:function(t){this._paddingRight!==t&&(this._paddingRight=t,this._doLayoutDirty())}},{key:"paddingTop",get:function(){return this._paddingTop},set:function(t){this._paddingTop!==t&&(this._paddingTop=t,this._doLayoutDirty())}},{key:"paddingBottom",get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!==t&&(this._paddingBottom=t,this._doLayoutDirty())}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX!==t&&(this._spacingX=t,this._doLayoutDirty())}},{key:"spacingY",get:function(){return this._spacingY},set:function(t){this._spacingY!==t&&(this._spacingY=t,this._doLayoutDirty())}},{key:"verticalDirection",get:function(){return this._verticalDirection},set:function(t){this._verticalDirection!==t&&(this._verticalDirection=t,this._doLayoutDirty())}},{key:"horizontalDirection",get:function(){return this._horizontalDirection},set:function(t){this._horizontalDirection!==t&&(this._horizontalDirection=t,this._doLayoutDirty())}},{key:"padding",get:function(){return this._paddingLeft},set:function(t){this.paddingLeft===t&&this._paddingRight===t&&this._paddingTop===t&&this._paddingBottom===t||(this._paddingLeft=this._paddingRight=this._paddingTop=this._paddingBottom=t,this._doLayoutDirty())}},{key:"constraint",get:function(){return this._constraint},set:function(t){this._layoutType!==Uo.NONE&&this._constraint!==t&&(this._constraint=t,this._doLayoutDirty())}},{key:"constraintNum",get:function(){return this._constraintNum},set:function(t){this._constraint!==qo.NONE&&this._constraintNum!==t&&(t<=0&&M("Limit values to be greater than 0"),this._constraintNum=t,this._doLayoutDirty())}},{key:"affectedByScale",get:function(){return this._affectedByScale},set:function(t){this._affectedByScale=t,this._doLayoutDirty()}}]),e}(E),jo.Type=Uo,jo.VerticalDirection=Yo,jo.HorizontalDirection=Xo,jo.ResizeMode=Wo,jo.AxisDirection=Zo,jo.Constraint=qo,p((Oo=Go).prototype,"alignHorizontal",[Xi,qi],Object.getOwnPropertyDescriptor(Oo.prototype,"alignHorizontal"),Oo.prototype),p(Oo.prototype,"alignVertical",[Ki,Qi],Object.getOwnPropertyDescriptor(Oo.prototype,"alignVertical"),Oo.prototype),p(Oo.prototype,"type",[Ji,$i],Object.getOwnPropertyDescriptor(Oo.prototype,"type"),Oo.prototype),p(Oo.prototype,"resizeMode",[to,eo,io],Object.getOwnPropertyDescriptor(Oo.prototype,"resizeMode"),Oo.prototype),p(Oo.prototype,"cellSize",[oo,no],Object.getOwnPropertyDescriptor(Oo.prototype,"cellSize"),Oo.prototype),p(Oo.prototype,"startAxis",[ro,so],Object.getOwnPropertyDescriptor(Oo.prototype,"startAxis"),Oo.prototype),p(Oo.prototype,"paddingLeft",[ao],Object.getOwnPropertyDescriptor(Oo.prototype,"paddingLeft"),Oo.prototype),p(Oo.prototype,"paddingRight",[ho],Object.getOwnPropertyDescriptor(Oo.prototype,"paddingRight"),Oo.prototype),p(Oo.prototype,"paddingTop",[lo],Object.getOwnPropertyDescriptor(Oo.prototype,"paddingTop"),Oo.prototype),p(Oo.prototype,"paddingBottom",[co],Object.getOwnPropertyDescriptor(Oo.prototype,"paddingBottom"),Oo.prototype),p(Oo.prototype,"spacingX",[uo],Object.getOwnPropertyDescriptor(Oo.prototype,"spacingX"),Oo.prototype),p(Oo.prototype,"spacingY",[_o],Object.getOwnPropertyDescriptor(Oo.prototype,"spacingY"),Oo.prototype),p(Oo.prototype,"verticalDirection",[po,go],Object.getOwnPropertyDescriptor(Oo.prototype,"verticalDirection"),Oo.prototype),p(Oo.prototype,"horizontalDirection",[fo,yo],Object.getOwnPropertyDescriptor(Oo.prototype,"horizontalDirection"),Oo.prototype),p(Oo.prototype,"constraint",[bo,To,mo],Object.getOwnPropertyDescriptor(Oo.prototype,"constraint"),Oo.prototype),p(Oo.prototype,"constraintNum",[vo,Co],Object.getOwnPropertyDescriptor(Oo.prototype,"constraintNum"),Oo.prototype),p(Oo.prototype,"affectedByScale",[So],Object.getOwnPropertyDescriptor(Oo.prototype,"affectedByScale"),Oo.prototype),Ao=p(Oo.prototype,"_resizeMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Wo.NONE}}),wo=p(Oo.prototype,"_layoutType",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Uo.NONE}}),Lo=p(Oo.prototype,"_cellSize",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new N(40,40)}}),Do=p(Oo.prototype,"_startAxis",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Zo.HORIZONTAL}}),Po=p(Oo.prototype,"_paddingLeft",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zo=p(Oo.prototype,"_paddingRight",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Io=p(Oo.prototype,"_paddingTop",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ro=p(Oo.prototype,"_paddingBottom",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xo=p(Oo.prototype,"_spacingX",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bo=p(Oo.prototype,"_spacingY",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),No=p(Oo.prototype,"_verticalDirection",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Yo.TOP_TO_BOTTOM}}),Ho=p(Oo.prototype,"_horizontalDirection",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Xo.LEFT_TO_RIGHT}}),Mo=p(Oo.prototype,"_constraint",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return qo.NONE}}),ko=p(Oo.prototype,"_constraintNum",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),Vo=p(Oo.prototype,"_affectedByScale",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fo=p(Oo.prototype,"_isAlign",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Eo=Oo))||Eo)||Eo)||Eo)||Eo)||Eo)||Eo));!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.FILLED=2]="FILLED"}(mn||(mn={})),A(mn);var Sn,En,On,An,wn,Ln,Dn,Pn,zn,In,Rn,xn,Bn,Nn,Hn,Mn,kn,Vn,Fn,jn,Gn,Un,Wn,Zn,Yn,Xn=function(e){return t({ProgressBar:e,ProgressBarComponent:e}),e}((Qo=o("cc.ProgressBar"),Jo=d(),$o=g(110),tn=f(),en=y(Ct),on=n(yt),nn=T(),rn=n(mn),sn=T(),an=T(),hn=j(),ln=T(),cn=T(),Qo(un=Jo(un=$o(un=tn(un=en((Tn=bn=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"_barSprite",pn,S(e)),C(e,"_mode",dn,S(e)),C(e,"_totalLength",gn,S(e)),C(e,"_progress",fn,S(e)),C(e,"_reverse",yn,S(e)),e}a(e,t);var i=e.prototype;return i._initBarSprite=function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var e=this.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint,n=t._uiProps.uiTransformComp.contentSize;if(this._barSprite.fillType===yt.FillType.RADIAL&&(this._mode=mn.FILLED),this._mode===mn.HORIZONTAL?this.totalLength=n.width:this._mode===mn.VERTICAL?this.totalLength=n.height:this.totalLength=this._barSprite.fillRange,t.parent===this.node){var r=-i.width*o.x;t.setPosition(r,0,0)}}},i._updateBarStatus=function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var e=t._uiProps.uiTransformComp,i=e.anchorPoint,o=e.contentSize,n=t.getPosition(),r=new k(0,.5),s=V(this._progress),a=this._totalLength*s,h=o,l=0,u=0;switch(this._mode){case mn.HORIZONTAL:this._reverse&&(r=new k(1,.5)),h=new N(a,o.height),l=this._totalLength,u=o.height;break;case mn.VERTICAL:r=this._reverse?new k(.5,1):new k(.5,0),h=new N(o.width,a),l=o.width,u=this._totalLength}if(this._mode===mn.FILLED)this._barSprite.type!==yt.Type.FILLED?M("ProgressBar FILLED mode only works when barSprite's Type is FILLED!"):(this._reverse&&(a*=-1),this._barSprite.fillRange=a);else if(this._barSprite.type!==yt.Type.FILLED){var _=r.x-i.x,p=r.y-i.y,d=new c(l*_,u*p,0);t.setPosition(n.x+d.x,n.y+d.y,n.z),e.setAnchorPoint(r),e.setContentSize(h)}else M("ProgressBar non-FILLED mode only works when barSprite's Type is non-FILLED!")}},_(e,[{key:"barSprite",get:function(){return this._barSprite},set:function(t){this._barSprite!==t&&(this._barSprite=t,this._initBarSprite())}},{key:"mode",get:function(){return this._mode},set:function(t){if(this._mode!==t&&(this._mode=t,this._barSprite)){var e=this._barSprite.node;if(!e)return;var i=e._uiProps.uiTransformComp.contentSize;this._mode===mn.HORIZONTAL?this.totalLength=i.width:this._mode===mn.VERTICAL?this.totalLength=i.height:this._mode===mn.FILLED&&(this.totalLength=this._barSprite.fillRange)}}},{key:"totalLength",get:function(){return this._totalLength},set:function(t){this._mode===mn.FILLED&&(t=V(t)),this._totalLength=t,this._updateBarStatus()}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateBarStatus())}},{key:"reverse",get:function(){return this._reverse},set:function(t){this._reverse!==t&&(this._reverse=t,this._barSprite&&(this._barSprite.fillStart=1-this._barSprite.fillStart),this._updateBarStatus())}}]),e}(E),bn.Mode=mn,p((_n=Tn).prototype,"barSprite",[on,nn],Object.getOwnPropertyDescriptor(_n.prototype,"barSprite"),_n.prototype),p(_n.prototype,"mode",[rn,sn],Object.getOwnPropertyDescriptor(_n.prototype,"mode"),_n.prototype),p(_n.prototype,"totalLength",[an],Object.getOwnPropertyDescriptor(_n.prototype,"totalLength"),_n.prototype),p(_n.prototype,"progress",[hn,F,ln],Object.getOwnPropertyDescriptor(_n.prototype,"progress"),_n.prototype),p(_n.prototype,"reverse",[cn],Object.getOwnPropertyDescriptor(_n.prototype,"reverse"),_n.prototype),pn=p(_n.prototype,"_barSprite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dn=p(_n.prototype,"_mode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mn.HORIZONTAL}}),gn=p(_n.prototype,"_totalLength",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),fn=p(_n.prototype,"_progress",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),yn=p(_n.prototype,"_reverse",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),un=_n))||un)||un)||un)||un)||un)),qn=new c,Kn=new c,Qn=new c,Jn=new k,$n=new e,tr=new k;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(Yn||(Yn={})),i(Yn);var er,ir,or,nr,rr,sr,ar,hr,lr,cr,ur,_r,pr,dr,gr,fr,yr,br,Tr,mr,vr,Cr,Sr,Er,Or,Ar,wr,Lr,Dr,Pr,zr,Ir,Rr,xr,Br,Nr,Hr,Mr,kr,Vr,Fr,jr,Gr,Ur,Wr,Zr,Yr,Xr,qr,Kr=function(e){return t({ScrollBar:e,ScrollBarComponent:e}),e}((Sn=o("cc.ScrollBar"),En=d(),On=g(110),An=f(),wn=y(Ct),Ln=n(yt),Dn=b(),Pn=T(),zn=n(Yn),In=b(),Rn=T(),xn=b(),Bn=T(),Nn=b(),Hn=T(),Sn(Mn=En(Mn=On(Mn=An(Mn=wn((Zn=Wn=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"_scrollView",Vn,S(e)),C(e,"_handle",Fn,S(e)),C(e,"_direction",jn,S(e)),C(e,"_enableAutoHide",Gn,S(e)),C(e,"_autoHideTime",Un,S(e)),e._touching=!1,e._opacity=255,e._autoHideRemainingTime=0,e}a(e,t);var i=e.prototype;return i.hide=function(){this._autoHideRemainingTime=0,this._setOpacity(0)},i.show=function(){this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity)},i.onScroll=function(t){if(this._scrollView){var e=this._scrollView.content;if(e){var i=e._uiProps.uiTransformComp.contentSize,o=this._scrollView.node._uiProps.uiTransformComp.contentSize,n=this.node._uiProps.uiTransformComp.contentSize;if(!this._conditionalDisableScrollBar(i,o)){this._enableAutoHide&&(this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity));var r=0,s=0,a=0,h=0,l=0,c=tr;c.set(0,0),this._direction===Yn.HORIZONTAL?(r=i.width,s=o.width,l=n.width,a=t.x,this._convertToScrollViewSpace(c,e),h=-c.x):this._direction===Yn.VERTICAL&&(r=i.height,s=o.height,l=n.height,a=t.y,this._convertToScrollViewSpace(c,e),h=-c.y);var u=this._calculateLength(r,s,l,a),_=tr;this._calculatePosition(_,r,s,l,h,a,u),this._updateLength(u),this._updateHandlerPosition(_)}}}},i.setScrollView=function(t){this._scrollView=t},i.onTouchBegan=function(){this._enableAutoHide&&(this._touching=!0)},i.onTouchEnded=function(){if(this._enableAutoHide&&(this._touching=!1,!(this._autoHideTime<=0))){if(this._scrollView){var t=this._scrollView.content;if(t){var e=t._uiProps.uiTransformComp.contentSize,i=this._scrollView.node._uiProps.uiTransformComp.contentSize;if(this._conditionalDisableScrollBar(e,i))return}}this._autoHideRemainingTime=this._autoHideTime}},i.onEnable=function(){var t=this.node.getComponent(yt);t&&(this._opacity=t.color.a)},i.start=function(){this._enableAutoHide&&this._setOpacity(0)},i.update=function(t){this._processAutoHide(t)},i._convertToScrollViewSpace=function(t,e){var i=this._scrollView&&this._scrollView.node._uiProps.uiTransformComp,o=e._uiProps.uiTransformComp;if(i&&o){qn.set(-o.anchorX*o.width,-o.anchorY*o.height,0),o.convertToWorldSpaceAR(qn,Kn);var n=i.convertToNodeSpaceAR(Kn);n.x+=i.anchorX*i.width,n.y+=i.anchorY*i.height,t.set(n.x,n.y)}else t.set(k.ZERO)},i._setOpacity=function(t){if(this._handle){var e=this.node.getComponent(yt);e&&($n.set(e.color),$n.a=t,e.color=$n),(e=this._handle.getComponent(yt))&&($n.set(e.color),$n.a=t,e.color=$n)}},i._updateHandlerPosition=function(t){if(this._handle){var e=Qn;this._fixupHandlerPosition(e),this._handle.node.setPosition(t.x+e.x,t.y+e.y,e.z)}},i._fixupHandlerPosition=function(t){var e=this.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint,n=this.handle.node._uiProps.uiTransformComp.contentSize,r=this.handle.node.parent;c.set(qn,-i.width*o.x,-i.height*o.y,0);var s=this.node._uiProps.uiTransformComp.convertToWorldSpaceAR(qn,Kn),a=t;a.set(0,0,0),r._uiProps.uiTransformComp.convertToNodeSpaceAR(s,a),this.direction===Yn.HORIZONTAL?a.set(a.x,a.y+(i.height-n.height)/2,a.z):this.direction===Yn.VERTICAL&&a.set(a.x+(i.width-n.width)/2,a.y,a.z),this.handle.node.setPosition(a)},i._conditionalDisableScrollBar=function(t,e){return t.width<=e.width&&this._direction===Yn.HORIZONTAL||t.height<=e.height&&this._direction===Yn.VERTICAL},i._calculateLength=function(t,e,i,o){var n=t;return o&&(n+=20*(o>0?o:-o)),i*(e/n)},i._calculatePosition=function(t,e,i,o,n,r,s){var a=e-i;r&&(a+=Math.abs(r));var h=0;a&&(h=V(h=n/a));var l=(o-s)*h;this._direction===Yn.VERTICAL?t.set(0,l):t.set(l,0)},i._updateLength=function(t){if(this._handle){var e=this._handle.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint;o.x===Jn.x&&o.y===Jn.y||e.setAnchorPoint(Jn),this._direction===Yn.HORIZONTAL?e.setContentSize(t,i.height):e.setContentSize(i.width,t)}},i._processAutoHide=function(t){if(this._enableAutoHide&&!(this._autoHideRemainingTime<=0)&&!this._touching&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this._autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var e=this._opacity*(this._autoHideRemainingTime/this._autoHideTime);this._setOpacity(e)}},_(e,[{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t,this.onScroll(k.ZERO))}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this.onScroll(k.ZERO))}},{key:"enableAutoHide",get:function(){return this._enableAutoHide},set:function(t){this._enableAutoHide!==t&&(this._enableAutoHide=t,this._enableAutoHide&&this._setOpacity(0))}},{key:"autoHideTime",get:function(){return this._autoHideTime},set:function(t){this._autoHideTime!==t&&(this._autoHideTime=t)}}]),e}(E),Wn.Direction=Yn,p((kn=Zn).prototype,"handle",[Ln,Dn,Pn],Object.getOwnPropertyDescriptor(kn.prototype,"handle"),kn.prototype),p(kn.prototype,"direction",[zn,In,Rn],Object.getOwnPropertyDescriptor(kn.prototype,"direction"),kn.prototype),p(kn.prototype,"enableAutoHide",[xn,Bn],Object.getOwnPropertyDescriptor(kn.prototype,"enableAutoHide"),kn.prototype),p(kn.prototype,"autoHideTime",[Nn,Hn],Object.getOwnPropertyDescriptor(kn.prototype,"autoHideTime"),kn.prototype),Vn=p(kn.prototype,"_scrollView",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fn=p(kn.prototype,"_handle",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jn=p(kn.prototype,"_direction",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Yn.HORIZONTAL}}),Gn=p(kn.prototype,"_enableAutoHide",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Un=p(kn.prototype,"_autoHideTime",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Mn=kn))||Mn)||Mn)||Mn)||Mn)||Mn)),Qr=t("ViewGroup",o("cc.ViewGroup")(er=g(110)(er=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e}(E))||er)||er);L.ViewGroup=Qr;var Jr,$r=1e-4,ts=new c,es=new c,is=new k,os=new k,ns=function(){return(new Date).getMilliseconds()},rs={"scroll-to-top":0,"scroll-to-bottom":1,"scroll-to-left":2,"scroll-to-right":3,scrolling:4,"bounce-bottom":6,"bounce-left":7,"bounce-right":8,"bounce-top":5,"scroll-ended":9,"touch-up":10,"scroll-ended-with-threshold":11,"scroll-began":12};!function(t){t.SCROLL_TO_TOP="scroll-to-top",t.SCROLL_TO_BOTTOM="scroll-to-bottom",t.SCROLL_TO_LEFT="scroll-to-left",t.SCROLL_TO_RIGHT="scroll-to-right",t.SCROLL_BEGAN="scroll-began",t.SCROLL_ENDED="scroll-ended",t.BOUNCE_TOP="bounce-top",t.BOUNCE_BOTTOM="bounce-bottom",t.BOUNCE_LEFT="bounce-left",t.BOUNCE_RIGHT="bounce-right",t.SCROLLING="scrolling",t.SCROLL_ENG_WITH_THRESHOLD="scroll-ended-with-threshold",t.TOUCH_UP="touch-up"}(Jr||(Jr={}));var ss,as,hs,ls,cs,us,_s,ps,ds,gs,fs,ys,bs,Ts,ms,vs,Cs,Ss,Es,Os,As,ws,Ls=function(e){return t({ScrollView:e,ScrollViewComponent:e}),e}((ir=o("cc.ScrollView"),or=d(),nr=g(110),rr=f(),sr=y(Ct),ar=j(),hr=b(),lr=T(),cr=j(),ur=b(),_r=T(),pr=b(),dr=T(),gr=b(),fr=T(),yr=n(r),br=b(),Tr=T(),mr=b(),vr=T(),Cr=n(Kr),Sr=b(),Er=T(),Or=b(),Ar=T(),wr=n(Kr),Lr=b(),Dr=T(),Pr=b(),zr=T(),Ir=n([st]),Rr=b(),xr=T(),ir(Br=or(Br=nr(Br=rr(Br=sr((qr=Xr=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"bounceDuration",Hr,S(e)),C(e,"brake",Mr,S(e)),C(e,"elastic",kr,S(e)),C(e,"inertia",Vr,S(e)),C(e,"horizontal",Fr,S(e)),C(e,"vertical",jr,S(e)),C(e,"cancelInnerEvents",Gr,S(e)),C(e,"scrollEvents",Ur,S(e)),e._autoScrolling=!1,e._scrolling=!1,C(e,"_content",Wr,S(e)),C(e,"_horizontalScrollBar",Zr,S(e)),C(e,"_verticalScrollBar",Yr,S(e)),e._topBoundary=0,e._bottomBoundary=0,e._leftBoundary=0,e._rightBoundary=0,e._touchMoveDisplacements=[],e._touchMoveTimeDeltas=[],e._touchMovePreviousTimestamp=0,e._touchMoved=!1,e._autoScrollAttenuate=!1,e._autoScrollStartPosition=new c,e._autoScrollTargetDelta=new c,e._autoScrollTotalTime=0,e._autoScrollAccumulatedTime=0,e._autoScrollCurrentlyOutOfBoundary=!1,e._autoScrollBraking=!1,e._autoScrollBrakingStartPosition=new c,e._outOfBoundaryAmount=new c,e._outOfBoundaryAmountDirty=!0,e._stopMouseWheel=!1,e._mouseWheelEventElapsedTime=0,e._isScrollEndedWithThresholdEventFired=!1,e._scrollEventEmitMask=0,e._isBouncing=!1,e._contentPos=new c,e._deltaPos=new c,e}a(e,t);var i=e.prototype;return i.scrollToBottom=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new k(0,0),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i,!0)},i.scrollToTop=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new k(0,1),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new k(0,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new k(1,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToTopLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new k(0,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToTopRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new k(1,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToBottomLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new k(0,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToBottomRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new k(1,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToOffset=function(t,e,i){void 0===i&&(i=!0);var o=this.getMaxScrollOffset(),n=new k(0,0);0===o.x?n.x=0:n.x=t.x/o.x,0===o.y?n.y=1:n.y=(o.y-t.y)/o.y,this.scrollTo(n,e,i)},i.getScrollOffset=function(){var t=this._getContentTopBoundary()-this._topBoundary,e=this._getContentLeftBoundary()-this._leftBoundary;return new k(e,t)},i.getMaxScrollOffset=function(){if(!this._content||!this.view)return k.ZERO;var t=this._content._uiProps.uiTransformComp.contentSize,e=t.width-this.view.width,i=t.height-this.view.height;return new k(e=e>=0?e:0,i=i>=0?i:0)},i.scrollToPercentHorizontal=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new k(t,0),applyToHorizontal:!0,applyToVertical:!1});e?this._startAutoScroll(o,e,!1!==i):this._moveContent(o)},i.scrollTo=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new k(t),applyToHorizontal:!0,applyToVertical:!0});e?this._startAutoScroll(o,e,i):this._moveContent(o)},i.scrollToPercentVertical=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new k(0,t),applyToHorizontal:!1,applyToVertical:!0});e?this._startAutoScroll(o,e,i):this._moveContent(o)},i.stopAutoScroll=function(){this._autoScrolling=!1,this._autoScrollAccumulatedTime=this._autoScrollTotalTime},i.setContentPosition=function(t){this._setContentPosition(t)},i._setContentPosition=function(t){if(this._content){var e=this._getContentPosition();Math.abs(t.x-e.x)<$r&&Math.abs(t.y-e.y)<$r||(this._content.setPosition(t),this._outOfBoundaryAmountDirty=!0)}},i.getContentPosition=function(){return this._getContentPosition()},i._getContentPosition=function(){return this._content?(this._contentPos.set(this._content.position),this._contentPos):c.ZERO.clone()},i.isScrolling=function(){return this._scrolling},i.isAutoScrolling=function(){return this._autoScrolling},i.getScrollEndedEventTiming=function(){return $r},i.start=function(){this._calculateBoundary(),this._content&&at.once(ht.EVENT_BEFORE_DRAW,this._adjustContentOutOfBoundary,this)},i.onEnable=function(){this._registerEvent(),this._content&&(this._content.on(l.SIZE_CHANGED,this._calculateBoundary,this),this._content.on(l.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.on(l.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.on(l.SIZE_CHANGED,this._calculateBoundary,this))),this._calculateBoundary(),this._updateScrollBarState()},i.update=function(t){this._autoScrolling&&this._processAutoScrolling(t)},i.onDisable=function(){this._unregisterEvent(),this._content&&(this._content.off(l.SIZE_CHANGED,this._calculateBoundary,this),this._content.off(l.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.off(l.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.off(l.SIZE_CHANGED,this._calculateBoundary,this))),this._hideScrollBar(),this.stopAutoScroll()},i._registerEvent=function(){this.node.on(l.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(l.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(l.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(l.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on(l.MOUSE_WHEEL,this._onMouseWheel,this,!0)},i._unregisterEvent=function(){this.node.off(l.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(l.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(l.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(l.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off(l.MOUSE_WHEEL,this._onMouseWheel,this,!0)},i._onMouseWheel=function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){var i=new c,o=t.getScrollY();this.vertical?i.set(0,-.1*o,0):this.horizontal&&i.set(-.1*o,0,0),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(i),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60,NaN,0),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(t)}},i._onTouchBegan=function(t,e){this.enabledInHierarchy&&this._content&&(this._hasNestedViewGroup(t,e)||(this._handlePressLogic(),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(t)))},i._onTouchMoved=function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){var i=t.touch;if(this._handleMoveLogic(i),this.cancelInnerEvents){var o=i.getUILocation(is);if(o.subtract(i.getUIStartLocation(os)),o.length()>7&&!this._touchMoved&&t.target!==this.node){var n=new pt(t.getTouches(),t.bubbles,G.TOUCH_CANCEL);n.touch=t.touch,n.simulate=!0,t.target.dispatchEvent(n),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}},i._onTouchEnded=function(t,e){if(this.enabledInHierarchy&&this._content&&t&&!this._hasNestedViewGroup(t,e)){this._dispatchEvent(Jr.TOUCH_UP);var i=t.touch;this._handleReleaseLogic(i),this._touchMoved?t.propagationStopped=!0:this._stopPropagationIfTargetIsMe(t)}},i._onTouchCancelled=function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){if(t&&!t.simulate){var i=t.touch;this._handleReleaseLogic(i)}this._stopPropagationIfTargetIsMe(t)}},i._calculateBoundary=function(){if(this._content&&this.view){var t=this._content.getComponent(Cn);t&&t.enabledInHierarchy&&t.updateLayout();var e=this.view,i=e.width*e.anchorX,o=e.height*e.anchorY;this._leftBoundary=-i,this._bottomBoundary=-o,this._rightBoundary=this._leftBoundary+e.width,this._topBoundary=this._bottomBoundary+e.height,this._moveContentToTopLeft(e.contentSize)}},i._hasNestedViewGroup=function(t,e){if(!t||t.eventPhase!==U.CAPTURING_PHASE)return!1;if(e)for(var i,o=W(e);!(i=o()).done;){var n=i.value;if(this.node===n)return!(!t.target||!t.target.getComponent(Qr));if(n.getComponent(Qr))return!0}return!1},i._startInertiaScroll=function(t){var e=new c(t);e.multiplyScalar(.7),this._startAttenuatingAutoScroll(e,t)},i._calculateAttenuatedFactor=function(t){return this.brake<=0?1-this.brake:(1-this.brake)*(1/(1+14e-6*t+t*t*8e-9))},i._startAttenuatingAutoScroll=function(t,e){var i=t.clone();if(i.normalize(),this._content&&this.view){var o=this._content._uiProps.uiTransformComp.contentSize,n=this.view.contentSize,r=o.width-n.width,s=o.height-n.height,a=this._calculateAttenuatedFactor(r),h=this._calculateAttenuatedFactor(s);i.x=i.x*r*(1-this.brake)*a,i.y=i.y*s*h*(1-this.brake),i.z=0}var l=t.length(),c=i.length()/l;if(i.add(t),this.brake>0&&c>7){c=Math.sqrt(c);var u=t.clone();u.multiplyScalar(c),i.set(u),i.add(t)}var _=this._calculateAutoScrollTimeByInitialSpeed(e.length());this.brake>0&&c>3&&(_*=c=3),0===this.brake&&c>1&&(_*=c),this._startAutoScroll(i,_,!0)},i._calculateAutoScrollTimeByInitialSpeed=function(t){return Math.sqrt(Math.sqrt(t/5))},i._startAutoScroll=function(t,e,i){void 0===i&&(i=!1);var o=this._flattenVectorByDirection(t);this._autoScrolling=!0,this._autoScrollTargetDelta=o,this._autoScrollAttenuate=i,c.copy(this._autoScrollStartPosition,this._getContentPosition()),this._autoScrollTotalTime=e,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._isScrollEndedWithThresholdEventFired=!1,this._autoScrollBrakingStartPosition.set(0,0,0),this._getHowMuchOutOfBoundary().equals(c.ZERO,$r)||(this._autoScrollCurrentlyOutOfBoundary=!0)},i._calculateTouchMoveVelocity=function(){var t=new c,e=0;if((e=this._touchMoveTimeDeltas.reduce((function(t,e){return t+e}),e))<=0||e>=.5)t.set(c.ZERO);else{var i=new c;i=this._touchMoveDisplacements.reduce((function(t,e){return t.add(e),t}),i),t.set(i.x*(1-this.brake)/e,i.y*(1-this.brake)/e,i.z)}return t},i._flattenVectorByDirection=function(t){var e=t;return e.x=this.horizontal?e.x:0,e.y=this.vertical?e.y:0,e},i._moveContent=function(t,e){var i=this._flattenVectorByDirection(t);ts.set(this._getContentPosition()),ts.add(i),ts.set(Math.floor(1e4*ts.x)*$r,Math.floor(1e4*ts.y)*$r,ts.z),this._setContentPosition(ts);var o=this._getHowMuchOutOfBoundary();is.set(o.x,o.y),this._updateScrollBar(is),this.elastic&&e&&this._startBounceBackIfNeeded()},i._getContentLeftBoundary=function(){if(!this._content)return-1;var t=this._getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.x-e.anchorX*e.width},i._getContentRightBoundary=function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentLeftBoundary()+t.width},i._getContentTopBoundary=function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentBottomBoundary()+t.height},i._getContentBottomBoundary=function(){if(!this._content)return-1;var t=this._getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.y-e.anchorY*e.height},i._getHowMuchOutOfBoundary=function(t){if((t=t||new c).equals(c.ZERO,$r)&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var e=new c;return this._getContentLeftBoundary()+t.x>this._leftBoundary?e.x=this._leftBoundary-(this._getContentLeftBoundary()+t.x):this._getContentRightBoundary()+t.x<this._rightBoundary&&(e.x=this._rightBoundary-(this._getContentRightBoundary()+t.x)),this._getContentTopBoundary()+t.y<this._topBoundary?e.y=this._topBoundary-(this._getContentTopBoundary()+t.y):this._getContentBottomBoundary()+t.y>this._bottomBoundary&&(e.y=this._bottomBoundary-(this._getContentBottomBoundary()+t.y)),t.equals(c.ZERO,$r)&&(this._outOfBoundaryAmount=e,this._outOfBoundaryAmountDirty=!1),this._clampDelta(e),e},i._updateScrollBar=function(t){this._horizontalScrollBar&&this._horizontalScrollBar.onScroll(t),this.verticalScrollBar&&this.verticalScrollBar.onScroll(t)},i._onScrollBarTouchBegan=function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchBegan(),this.verticalScrollBar&&this.verticalScrollBar.onTouchBegan()},i._onScrollBarTouchEnded=function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchEnded(),this.verticalScrollBar&&this.verticalScrollBar.onTouchEnded()},i._dispatchEvent=function(t){if(t===Jr.SCROLL_ENDED)this._scrollEventEmitMask=0;else if(t===Jr.SCROLL_TO_TOP||t===Jr.SCROLL_TO_BOTTOM||t===Jr.SCROLL_TO_LEFT||t===Jr.SCROLL_TO_RIGHT){var e=1<<rs[t];if(this._scrollEventEmitMask&e)return;this._scrollEventEmitMask|=e}st.emitEvents(this.scrollEvents,this,rs[t]),this.node.emit(t,this)},i._adjustContentOutOfBoundary=function(){if(this._content&&(this._outOfBoundaryAmountDirty=!0,this._isOutOfBoundary())){var t=this._getHowMuchOutOfBoundary();ts.set(this._getContentPosition()),ts.add(t),this._content.setPosition(ts),this._updateScrollBar(k.ZERO)}},i._hideScrollBar=function(){this._horizontalScrollBar&&this._horizontalScrollBar.hide(),this._verticalScrollBar&&this._verticalScrollBar.hide()},i._updateScrollBarState=function(){if(this._content&&this.view){var t=this.view,e=this._content._uiProps.uiTransformComp;this.verticalScrollBar&&(e.height<t.height?this.verticalScrollBar.hide():this.verticalScrollBar.show()),this.horizontalScrollBar&&(e.width<t.width?this.horizontalScrollBar.hide():this.horizontalScrollBar.show())}},i._stopPropagationIfTargetIsMe=function(t){t.eventPhase===U.AT_TARGET&&t.target===this.node&&(t.propagationStopped=!0)},i._processDeltaMove=function(t){this._scrollChildren(t),this._gatherTouchMove(t)},i._handleMoveLogic=function(t){this._getLocalAxisAlignDelta(this._deltaPos,t),this._processDeltaMove(this._deltaPos)},i._handleReleaseLogic=function(t){this._getLocalAxisAlignDelta(this._deltaPos,t),this._gatherTouchMove(this._deltaPos),this._processInertiaScroll(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(Jr.SCROLL_ENDED))},i._getLocalAxisAlignDelta=function(t,e){var i=this.node._uiProps.uiTransformComp,o=new c;i&&(e.getUILocation(is),e.getUIPreviousLocation(os),ts.set(is.x,is.y,0),es.set(os.x,os.y,0),i.convertToNodeSpaceAR(ts,ts),i.convertToNodeSpaceAR(es,es),c.subtract(o,ts,es)),t.set(o)},i._scrollChildren=function(t){this._clampDelta(t);var e,i,o=t;if(this.elastic&&(e=this._getHowMuchOutOfBoundary(),o.x*=0===e.x?1:.5,o.y*=0===e.y?1:.5),this.elastic||(e=this._getHowMuchOutOfBoundary(o),o.add(e)),this._content){var n=this._content._uiProps.uiTransformComp,r=n.anchorX,s=n.anchorY,a=n.width,h=n.height,l=this._content.position||c.ZERO;o.y>0?l.y-s*h+o.y>=this._bottomBoundary&&(i=Jr.SCROLL_TO_BOTTOM):o.y<0&&l.y-s*h+h+o.y<=this._topBoundary&&(i=Jr.SCROLL_TO_TOP),o.x<0?l.x-r*a+a+o.x<=this._rightBoundary&&(i=Jr.SCROLL_TO_RIGHT):o.x>0&&l.x-r*a+o.x>=this._leftBoundary&&(i=Jr.SCROLL_TO_LEFT)}this._moveContent(o,!1),0===o.x&&0===o.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent(Jr.SCROLL_BEGAN)),this._dispatchEvent(Jr.SCROLLING)),i&&i.length>0&&this._dispatchEvent(i)},i._handlePressLogic=function(){this._autoScrolling&&this._dispatchEvent(Jr.SCROLL_ENDED),this._autoScrolling=!1,this._isBouncing=!1,this._touchMovePreviousTimestamp=ns(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._onScrollBarTouchBegan()},i._clampDelta=function(t){if(this._content&&this.view){var e=this.view.contentSize,i=this._content._uiProps.uiTransformComp;i.width<e.width&&(t.x=0),i.height<e.height&&(t.y=0)}},i._gatherTouchMove=function(t){var e=t.clone();for(this._clampDelta(e);this._touchMoveDisplacements.length>=5;)this._touchMoveDisplacements.shift(),this._touchMoveTimeDeltas.shift();this._touchMoveDisplacements.push(e);var i=ns();this._touchMoveTimeDeltas.push((i-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=i},i._startBounceBackIfNeeded=function(){if(!this.elastic)return!1;var t=this._getHowMuchOutOfBoundary();if(this._clampDelta(t),t.equals(c.ZERO,$r))return!1;var e=Math.max(this.bounceDuration,0);return this._startAutoScroll(t,e,!0),this._isBouncing||(t.y>0&&this._dispatchEvent(Jr.BOUNCE_TOP),t.y<0&&this._dispatchEvent(Jr.BOUNCE_BOTTOM),t.x>0&&this._dispatchEvent(Jr.BOUNCE_RIGHT),t.x<0&&this._dispatchEvent(Jr.BOUNCE_LEFT),this._isBouncing=!0),!0},i._processInertiaScroll=function(){if(!this._startBounceBackIfNeeded()&&this.inertia){var t=this._calculateTouchMoveVelocity();!t.equals(ts,$r)&&this.brake<1&&this._startInertiaScroll(t)}this._onScrollBarTouchEnded()},i._isOutOfBoundary=function(){return!this._getHowMuchOutOfBoundary().equals(c.ZERO,$r)},i._isNecessaryAutoScrollBrake=function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this._getContentPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},i._processAutoScrolling=function(t){var e=this._isNecessaryAutoScrollBrake(),i=e?.05:1;this._autoScrollAccumulatedTime+=t*(1/i);var o,n=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(o=n,n=(o-=1)*o*o*o*o+1);var r=this._autoScrollTargetDelta.clone();r.multiplyScalar(n);var s=this._autoScrollStartPosition.clone();s.add(r);var a=Math.abs(n-1)<=$r;if(Math.abs(n-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent(Jr.SCROLL_ENG_WITH_THRESHOLD),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var h=s.clone();h.subtract(this._autoScrollBrakingStartPosition),e&&h.multiplyScalar(i),s.set(this._autoScrollBrakingStartPosition),s.add(h)}else{var l=s.clone();l.subtract(this.getContentPosition());var u=this._getHowMuchOutOfBoundary(l);u.equals(c.ZERO,$r)||(s.add(u),a=!0)}a&&(this._autoScrolling=!1);var _=s.clone();_.subtract(this._getContentPosition()),this._clampDelta(_),this._moveContent(_,a),this._dispatchEvent(Jr.SCROLLING),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent(Jr.SCROLL_ENDED))},i._checkMouseWheel=function(t){if(!this._getHowMuchOutOfBoundary().equals(c.ZERO,$r))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(Jr.SCROLL_ENDED),void(this._stopMouseWheel=!1);this._mouseWheelEventElapsedTime+=t,this._mouseWheelEventElapsedTime>.1&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(Jr.SCROLL_ENDED),this._stopMouseWheel=!1)},i._calculateMovePercentDelta=function(t){var e=t.anchor,i=t.applyToHorizontal,o=t.applyToVertical;this._calculateBoundary(),e.clampf(k.ZERO,k.ONE);var n=this._getContentBottomBoundary()-this._bottomBoundary;n=-n;var r=this._getContentLeftBoundary()-this._leftBoundary;r=-r;var s=new c;if(this._content&&this.view){var a=0,h=this._content._uiProps.uiTransformComp.contentSize,l=this.view.contentSize;i&&(a=h.width-l.width,s.x=r-a*e.x),o&&(a=h.height-l.height,s.y=n-a*e.y)}return s},i._moveContentToTopLeft=function(t){var e=this._getContentBottomBoundary()-this._bottomBoundary;e=-e;var i=new c,o=0,n=this._getContentLeftBoundary()-this._leftBoundary;if(n=-n,this._content){var r=this._content._uiProps.uiTransformComp.contentSize;r.height<t.height&&(o=r.height-t.height,i.y=e-o),r.width<t.width&&(o=r.width-t.width,i.x=n)}this._updateScrollBarState(),this._moveContent(i),this._adjustContentOutOfBoundary()},i._scaleChanged=function(t){t===u.SCALE&&this._calculateBoundary()},_(e,[{key:"content",get:function(){return this._content},set:function(t){if(this._content!==t){var e=t&&t.parent&&t.parent._uiProps.uiTransformComp;!t||t&&e?(this._content=t,this._calculateBoundary()):Z(4302)}}},{key:"horizontalScrollBar",get:function(){return this._horizontalScrollBar},set:function(t){this._horizontalScrollBar!==t&&(this._horizontalScrollBar=t,this._horizontalScrollBar&&(this._horizontalScrollBar.setScrollView(this),this._updateScrollBar(k.ZERO)))}},{key:"verticalScrollBar",get:function(){return this._verticalScrollBar},set:function(t){this._verticalScrollBar!==t&&(this._verticalScrollBar=t,this._verticalScrollBar&&(this._verticalScrollBar.setScrollView(this),this._updateScrollBar(k.ZERO)))}},{key:"view",get:function(){var t=this._content&&this._content.parent;return t?t._uiProps.uiTransformComp:null}}]),e}(Qr),Xr.EventType=Jr,Hr=p((Nr=qr).prototype,"bounceDuration",[O,ar,hr,lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Mr=p(Nr.prototype,"brake",[O,cr,ur,_r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),kr=p(Nr.prototype,"elastic",[O,pr,dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vr=p(Nr.prototype,"inertia",[O,gr,fr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p(Nr.prototype,"content",[yr,br,Tr],Object.getOwnPropertyDescriptor(Nr.prototype,"content"),Nr.prototype),Fr=p(Nr.prototype,"horizontal",[O,mr,vr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p(Nr.prototype,"horizontalScrollBar",[Cr,Sr,Er],Object.getOwnPropertyDescriptor(Nr.prototype,"horizontalScrollBar"),Nr.prototype),jr=p(Nr.prototype,"vertical",[O,Or,Ar],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p(Nr.prototype,"verticalScrollBar",[wr,Lr,Dr],Object.getOwnPropertyDescriptor(Nr.prototype,"verticalScrollBar"),Nr.prototype),Gr=p(Nr.prototype,"cancelInnerEvents",[O,Pr,zr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ur=p(Nr.prototype,"scrollEvents",[Ir,O,Rr,xr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Wr=p(Nr.prototype,"_content",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zr=p(Nr.prototype,"_horizontalScrollBar",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yr=p(Nr.prototype,"_verticalScrollBar",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Br=Nr))||Br)||Br)||Br)||Br)||Br)),Ds=new c;!function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(ws||(ws={})),i(ws);var Ps,zs,Is,Rs,xs,Bs,Ns,Hs,Ms,ks,Vs,Fs,js,Gs,Us,Ws,Zs,Ys,Xs,qs,Ks=function(e){return t({Slider:e,SliderComponent:e}),e}((ss=o("cc.Slider"),as=d(),hs=g(110),ls=f(),cs=y(Ct),us=n(yt),_s=T(),ps=n(ws),ds=T(),gs=j(),fs=T(),ys=n([st]),bs=T(),ss(Ts=as(Ts=hs(Ts=ls(Ts=cs((As=Os=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"slideEvents",vs,S(e)),C(e,"_handle",Cs,S(e)),C(e,"_direction",Ss,S(e)),C(e,"_progress",Es,S(e)),e._offset=new c,e._dragging=!1,e._touchHandle=!1,e._handleLocalPos=new c,e._touchPos=new c,e}a(e,t);var i=e.prototype;return i.__preload=function(){this._updateHandlePosition()},i.onEnable=function(){this._updateHandlePosition(),this.node.on(l.TOUCH_START,this._onTouchBegan,this),this.node.on(l.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(l.TOUCH_END,this._onTouchEnded,this),this.node.on(l.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.on(l.TOUCH_START,this._onHandleDragStart,this),this._handle.node.on(l.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.on(l.TOUCH_END,this._onTouchEnded,this))},i.onDisable=function(){this.node.off(l.TOUCH_START,this._onTouchBegan,this),this.node.off(l.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(l.TOUCH_END,this._onTouchEnded,this),this.node.off(l.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.off(l.TOUCH_START,this._onHandleDragStart,this),this._handle.node.off(l.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.off(l.TOUCH_END,this._onTouchEnded,this))},i._onHandleDragStart=function(t){if(t&&this._handle&&this._handle.node._uiProps.uiTransformComp){this._dragging=!0,this._touchHandle=!0;var e=t.touch.getUILocation();c.set(this._touchPos,e.x,e.y,0),this._handle.node._uiProps.uiTransformComp.convertToNodeSpaceAR(this._touchPos,this._offset),t.propagationStopped=!0}},i._onTouchBegan=function(t){this._handle&&t&&(this._dragging=!0,this._touchHandle||this._handleSliderLogic(t.touch),t.propagationStopped=!0)},i._onTouchMoved=function(t){this._dragging&&t&&(this._handleSliderLogic(t.touch),t.propagationStopped=!0)},i._onTouchEnded=function(t){this._dragging=!1,this._touchHandle=!1,this._offset=new c,t&&(t.propagationStopped=!0)},i._onTouchCancelled=function(t){this._dragging=!1,t&&(t.propagationStopped=!0)},i._handleSliderLogic=function(t){this._updateProgress(t),this._emitSlideEvent()},i._emitSlideEvent=function(){st.emitEvents(this.slideEvents,this),this.node.emit("slide",this)},i._updateProgress=function(t){if(this._handle&&t){var e=t.getUILocation();c.set(this._touchPos,e.x,e.y,0);var i=this.node._uiProps.uiTransformComp,o=i.convertToNodeSpaceAR(this._touchPos,Ds);this.direction===ws.Horizontal?this.progress=V(.5+(o.x-this._offset.x)/i.width):this.progress=V(.5+(o.y-this._offset.y)/i.height)}},i._updateHandlePosition=function(){if(this._handle){this._handleLocalPos.set(this._handle.node.getPosition());var t=this.node._uiProps.uiTransformComp;this._direction===ws.Horizontal?this._handleLocalPos.x=-t.width*t.anchorX+this.progress*t.width:this._handleLocalPos.y=-t.height*t.anchorY+this.progress*t.height,this._handle.node.setPosition(this._handleLocalPos)}},i._changeLayout=function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(t.setContentSize(e.height,e.width),this._handle){var i=this._handle.node.position;this._direction===ws.Horizontal?this._handle.node.setPosition(i.x,0,i.z):this._handle.node.setPosition(0,i.y,i.z),this._updateHandlePosition()}},_(e,[{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._changeLayout())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateHandlePosition())}}]),e}(E),Os.Direction=ws,p((ms=As).prototype,"handle",[us,_s],Object.getOwnPropertyDescriptor(ms.prototype,"handle"),ms.prototype),p(ms.prototype,"direction",[ps,ds],Object.getOwnPropertyDescriptor(ms.prototype,"direction"),ms.prototype),p(ms.prototype,"progress",[F,gs,fs],Object.getOwnPropertyDescriptor(ms.prototype,"progress"),ms.prototype),vs=p(ms.prototype,"slideEvents",[ys,O,bs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Cs=p(ms.prototype,"_handle",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ss=p(ms.prototype,"_direction",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ws.Horizontal}}),Es=p(ms.prototype,"_progress",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Ts=ms))||Ts)||Ts)||Ts)||Ts)||Ts));function Qs(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Object.assign.apply(Object,[{}].concat(e))}!function(t){t.TOGGLE="toggle"}(qs||(qs={}));var Js,$s,ta,ea,ia,oa,na,ra,sa,aa,ha,la,ca,ua,_a,pa,da,ga,fa,ya,ba,Ta,ma,va,Ca,Sa,Ea,Oa,Aa,wa,La,Da,Pa,za,Ia,Ra,xa,Ba,Na,Ha,Ma,ka,Va,Fa,ja,Ga,Ua,Wa,Za,Ya,Xa,qa,Ka,Qa,Ja,$a,th,eh,ih,oh=function(e){return t({Toggle:e,ToggleComponent:e}),e}((Ps=o("cc.Toggle"),zs=d(),Is=g(110),Rs=f(),xs=y(Ct),Bs=b(),Ns=T(),Hs=n(yt),Ms=b(),ks=T(),Vs=n([st]),Fs=T(),Ps(js=zs(js=Is(js=Rs(js=xs((Xs=Ys=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"checkEvents",Us,S(e)),C(e,"_isChecked",Ws,S(e)),C(e,"_checkMark",Zs,S(e)),e}a(e,t);var i=e.prototype;return i._internalToggle=function(){this.isChecked=!this.isChecked},i._set=function(t,e){if(void 0===e&&(e=!0),this._isChecked!=t){this._isChecked=t;var i=this._toggleContainer;i&&i.enabled&&this.enabled&&(t||!i.anyTogglesChecked()&&!i.allowSwitchOff)&&(this._isChecked=!0,i.notifyToggleCheck(this,e)),this.playEffect(),e&&this._emitToggleEvents()}},i.playEffect=function(){this._checkMark&&(this._checkMark.node.active=this._isChecked)},i.setIsCheckedWithoutNotify=function(t){this._set(t,!1)},i.onEnable=function(){t.prototype.onEnable.call(this),this.playEffect(),this.node.on(e.EventType.CLICK,this._internalToggle,this)},i.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(e.EventType.CLICK,this._internalToggle,this)},i.OnDestroy=function(){var t=this._toggleContainer;t&&t.ensureValidState()},i._emitToggleEvents=function(){this.node.emit(e.EventType.TOGGLE,this),this.checkEvents&&st.emitEvents(this.checkEvents,this)},_(e,[{key:"isChecked",get:function(){return this._isChecked},set:function(t){this._set(t)}},{key:"checkMark",get:function(){return this._checkMark},set:function(t){this._checkMark!==t&&(this._checkMark=t)}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"_toggleContainer",get:function(){var t=this.node.parent;return L.Node.isNode(t)?t.getComponent("cc.ToggleContainer"):null}}]),e}(we),Ys.EventType=Qs(qs,ve),p((Gs=Xs).prototype,"isChecked",[Bs,Ns],Object.getOwnPropertyDescriptor(Gs.prototype,"isChecked"),Gs.prototype),p(Gs.prototype,"checkMark",[Hs,Ms,ks],Object.getOwnPropertyDescriptor(Gs.prototype,"checkMark"),Gs.prototype),Us=p(Gs.prototype,"checkEvents",[Vs,O,Fs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ws=p(Gs.prototype,"_isChecked",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zs=p(Gs.prototype,"_checkMark",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),js=Gs))||js)||js)||js)||js)||js)),nh=function(e){return t({ToggleContainer:e,ToggleContainerComponent:e}),e}((Js=o("cc.ToggleContainer"),$s=d(),ta=g(110),ea=f(),ia=T(),oa=n([st]),na=T(),Js(ra=$s(ra=ta(ra=ea(ra=s((la=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"_allowSwitchOff",aa,S(e)),C(e,"checkEvents",ha,S(e)),e}a(e,t);var i=e.prototype;return i.onEnable=function(){this.ensureValidState(),this.node.on(l.CHILD_ADDED,this.ensureValidState,this),this.node.on(l.CHILD_REMOVED,this.ensureValidState,this)},i.onDisable=function(){this.node.off(l.CHILD_ADDED,this.ensureValidState,this),this.node.off(l.CHILD_REMOVED,this.ensureValidState,this)},i.activeToggles=function(){return this.toggleItems.filter((function(t){return t.isChecked}))},i.anyTogglesChecked=function(){return!!this.toggleItems.find((function(t){return t.isChecked}))},i.notifyToggleCheck=function(t,e){if(void 0===e&&(e=!0),this.enabledInHierarchy){for(var i=0;i<this.toggleItems.length;i++){var o=this.toggleItems[i];o!==t&&(e?o.isChecked=!1:o.setIsCheckedWithoutNotify(!1))}this.checkEvents&&L.Component.EventHandler.emitEvents(this.checkEvents,t)}},i.ensureValidState=function(){var t=this.toggleItems;if(!this._allowSwitchOff&&!this.anyTogglesChecked()&&0!==t.length){var e=t[0];e.isChecked=!0,this.notifyToggleCheck(e)}var i=this.activeToggles();if(i.length>1)for(var o=i[0],n=0;n<i.length;++n){var r=i[n];r!==o&&(r.isChecked=!1)}},_(e,[{key:"allowSwitchOff",get:function(){return this._allowSwitchOff},set:function(t){this._allowSwitchOff=t}},{key:"toggleItems",get:function(){return this.node.children.map((function(t){var e=t.getComponent("cc.Toggle");return e&&e.enabled?e:null})).filter(Boolean)}}]),e}(E),aa=p((sa=la).prototype,"_allowSwitchOff",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p(sa.prototype,"allowSwitchOff",[ia],Object.getOwnPropertyDescriptor(sa.prototype,"allowSwitchOff"),sa.prototype),ha=p(sa.prototype,"checkEvents",[oa,O,na],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ra=sa))||ra)||ra)||ra)||ra)||ra)),rh=new k;function sh(t){return t instanceof q?_t:t._uiProps.uiTransformComp?t._uiProps.uiTransformComp.contentSize:N.ZERO}function ah(t,e,i,o){t.parent?rh.set(t.parent.getScale().x,t.parent.getScale().y):rh.set(0,0);for(var n=rh.x,r=rh.y,s=0,a=0,h=t.parent;;){if(!h)return i.x=i.y=0,void(o.x=o.y=1);var l=h.getPosition();if(s+=l.x,a+=l.y,(h=h.parent)===e)break;h?rh.set(h.getScale().x,h.getScale().y):rh.set(0,0);var c=rh.x,u=rh.y;s*=c,a*=u,n*=c,r*=u}o.x=0!==n?1/n:1,o.y=0!==r?1/r:1,i.x=-s,i.y=-a}!function(t){t[t.ONCE=0]="ONCE",t[t.ALWAYS=1]="ALWAYS",t[t.ON_WINDOW_RESIZE=2]="ON_WINDOW_RESIZE"}(eh||(eh={})),i(eh),function(t){t[t.TOP=1]="TOP",t[t.MID=2]="MID",t[t.BOT=4]="BOT",t[t.LEFT=8]="LEFT",t[t.CENTER=16]="CENTER",t[t.RIGHT=32]="RIGHT",t[t.HORIZONTAL=56]="HORIZONTAL",t[t.VERTICAL=7]="VERTICAL"}(ih||(ih={}));var hh,lh,ch,uh,_h,ph,dh,gh,fh,yh,bh,Th,mh,vh,Ch,Sh,Eh,Oh,Ah,wh=ih.TOP|ih.BOT,Lh=ih.LEFT|ih.RIGHT,Dh=function(e){return t({Widget:e,WidgetComponent:e}),e}((ca=o("cc.Widget"),ua=d(),_a=g(110),pa=f(),da=y(Ct),ga=n(r),fa=T(),ya=T(),ba=T(),Ta=T(),ma=T(),va=T(),Ca=T(),Sa=H(),Ea=H(),Oa=T(),Aa=T(),wa=T(),La=T(),Da=T(),Pa=T(),za=n(eh),Ia=T(),ca(Ra=ua(Ra=_a(Ra=pa(Ra=da(Ra=s((th=$a=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._lastPos=new c,e._lastSize=new N,e._dirty=!0,e._hadAlignOnce=!1,C(e,"_alignFlags",Ba,S(e)),C(e,"_target",Na,S(e)),C(e,"_left",Ha,S(e)),C(e,"_right",Ma,S(e)),C(e,"_top",ka,S(e)),C(e,"_bottom",Va,S(e)),C(e,"_horizontalCenter",Fa,S(e)),C(e,"_verticalCenter",ja,S(e)),C(e,"_isAbsLeft",Ga,S(e)),C(e,"_isAbsRight",Ua,S(e)),C(e,"_isAbsTop",Wa,S(e)),C(e,"_isAbsBottom",Za,S(e)),C(e,"_isAbsHorizontalCenter",Ya,S(e)),C(e,"_isAbsVerticalCenter",Xa,S(e)),C(e,"_originalWidth",qa,S(e)),C(e,"_originalHeight",Ka,S(e)),C(e,"_alignMode",Qa,S(e)),C(e,"_lockFlags",Ja,S(e)),e}a(e,t);var i=e.prototype;return i.updateAlignment=function(){L._widgetManager.updateAlignment(this.node)},i._validateTargetInDEV=function(){},i.setDirty=function(){this._recursiveDirty()},i.onEnable=function(){this.node.getPosition(this._lastPos),this._lastSize.set(this.node._uiProps.uiTransformComp.contentSize),L._widgetManager.add(this),this._hadAlignOnce=!1,this._registerEvent(),this._registerTargetEvents()},i.onDisable=function(){L._widgetManager.remove(this),this._unregisterEvent(),this._unregisterTargetEvents()},i.onDestroy=function(){this._removeParentEvent()},i._adjustWidgetToAllowMovingInEditor=function(){},i._adjustWidgetToAllowResizingInEditor=function(){},i._adjustWidgetToAnchorChanged=function(){this.setDirty()},i._adjustTargetToParentChanged=function(t){t&&this._unregisterOldParentEvents(t),this.node.getParent()&&this._registerTargetEvents(),this._setDirtyByMode()},i._registerEvent=function(){this.node.on(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),this.node.on(l.SIZE_CHANGED,this._setDirtyByMode,this),this.node.on(l.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this),this.node.on(l.PARENT_CHANGED,this._adjustTargetToParentChanged,this)},i._unregisterEvent=function(){this.node.off(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),this.node.off(l.SIZE_CHANGED,this._setDirtyByMode,this),this.node.off(l.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this)},i._removeParentEvent=function(){this.node.off(l.PARENT_CHANGED,this._adjustTargetToParentChanged,this)},i._autoChangedValue=function(t,e){if((this._alignFlags&t)>0){var i=this.node.parent&&this.node.parent._uiProps,o=i&&i.uiTransformComp,n=o?o.contentSize:_t;this.isAlignLeft&&t===ih.LEFT?this._left=e?this._left*n.width:this._left/n.width:this.isAlignRight&&t===ih.RIGHT?this._right=e?this._right*n.width:this._right/n.width:this.isAlignHorizontalCenter&&t===ih.CENTER?this._horizontalCenter=e?this._horizontalCenter*n.width:this._horizontalCenter/n.width:this.isAlignTop&&t===ih.TOP?this._top=e?this._top*n.height:this._top/n.height:this.isAlignBottom&&t===ih.BOT?this._bottom=e?this._bottom*n.height:this._bottom/n.height:this.isAbsoluteVerticalCenter&&t===ih.MID&&(this._verticalCenter=this._verticalCenter/n.height),this._recursiveDirty()}},i._registerTargetEvents=function(){var t=this._target||this.node.parent;t&&t.getComponent(Ct)&&(t.on(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),t.on(l.SIZE_CHANGED,this._setDirtyByMode,this))},i._unregisterTargetEvents=function(){var t=this._target||this.node.parent;t&&(t.off(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),t.off(l.SIZE_CHANGED,this._setDirtyByMode,this))},i._unregisterOldParentEvents=function(t){var e=this._target||t;e&&(e.off(l.TRANSFORM_CHANGED,this._setDirtyByMode,this),e.off(l.SIZE_CHANGED,this._setDirtyByMode,this))},i._setDirtyByMode=function(){(this.alignMode===eh.ALWAYS||Y)&&this._recursiveDirty()},i._setAlign=function(t,e){if(e!==(this._alignFlags&t)>0){var i=(t&Lh)>0,o=this.node._uiProps.uiTransformComp;e?(this._alignFlags|=t,i?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this._originalWidth=o.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this._originalHeight=o.height))):(i?this.isStretchWidth&&(o.width=this._originalWidth):this.isStretchHeight&&(o.height=this._originalHeight),this._alignFlags&=~t)}},i._recursiveDirty=function(){this._dirty||(this._dirty=!0)},_(e,[{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._unregisterTargetEvents(),this._target=t,this._registerTargetEvents(),this._validateTargetInDEV(),this._recursiveDirty())}},{key:"isAlignTop",get:function(){return(this._alignFlags&ih.TOP)>0},set:function(t){this._setAlign(ih.TOP,t),this._recursiveDirty()}},{key:"isAlignBottom",get:function(){return(this._alignFlags&ih.BOT)>0},set:function(t){this._setAlign(ih.BOT,t),this._recursiveDirty()}},{key:"isAlignLeft",get:function(){return(this._alignFlags&ih.LEFT)>0},set:function(t){this._setAlign(ih.LEFT,t),this._recursiveDirty()}},{key:"isAlignRight",get:function(){return(this._alignFlags&ih.RIGHT)>0},set:function(t){this._setAlign(ih.RIGHT,t),this._recursiveDirty()}},{key:"isAlignVerticalCenter",get:function(){return(this._alignFlags&ih.MID)>0},set:function(t){t?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=ih.MID):this._alignFlags&=~ih.MID,this._recursiveDirty()}},{key:"isAlignHorizontalCenter",get:function(){return(this._alignFlags&ih.CENTER)>0},set:function(t){t?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=ih.CENTER):this._alignFlags&=~ih.CENTER,this._recursiveDirty()}},{key:"isStretchWidth",get:function(){return(this._alignFlags&Lh)===Lh}},{key:"isStretchHeight",get:function(){return(this._alignFlags&wh)===wh}},{key:"top",get:function(){return this._top},set:function(t){this._top=t,this._recursiveDirty()}},{key:"editorTop",get:function(){return this._isAbsTop?this._top:100*this._top},set:function(t){this._top=this._isAbsTop?t:t/100,this._recursiveDirty()}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom=t,this._recursiveDirty()}},{key:"editorBottom",get:function(){return this._isAbsBottom?this._bottom:100*this._bottom},set:function(t){this._bottom=this._isAbsBottom?t:t/100,this._recursiveDirty()}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,this._recursiveDirty()}},{key:"editorLeft",get:function(){return this._isAbsLeft?this._left:100*this._left},set:function(t){this._left=this._isAbsLeft?t:t/100,this._recursiveDirty()}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,this._recursiveDirty()}},{key:"editorRight",get:function(){return this._isAbsRight?this._right:100*this._right},set:function(t){this._right=this._isAbsRight?t:t/100,this._recursiveDirty()}},{key:"horizontalCenter",get:function(){return this._horizontalCenter},set:function(t){this._horizontalCenter=t,this._recursiveDirty()}},{key:"editorHorizontalCenter",get:function(){return this._isAbsHorizontalCenter?this._horizontalCenter:100*this._horizontalCenter},set:function(t){this._horizontalCenter=this._isAbsHorizontalCenter?t:t/100,this._recursiveDirty()}},{key:"verticalCenter",get:function(){return this._verticalCenter},set:function(t){this._verticalCenter=t,this._recursiveDirty()}},{key:"editorVerticalCenter",get:function(){return this._isAbsVerticalCenter?this._verticalCenter:100*this._verticalCenter},set:function(t){this._verticalCenter=this._isAbsVerticalCenter?t:t/100,this._recursiveDirty()}},{key:"isAbsoluteTop",get:function(){return this._isAbsTop},set:function(t){this._isAbsTop!==t&&(this._isAbsTop=t,this._autoChangedValue(ih.TOP,this._isAbsTop))}},{key:"isAbsoluteBottom",get:function(){return this._isAbsBottom},set:function(t){this._isAbsBottom!==t&&(this._isAbsBottom=t,this._autoChangedValue(ih.BOT,this._isAbsBottom))}},{key:"isAbsoluteLeft",get:function(){return this._isAbsLeft},set:function(t){this._isAbsLeft!==t&&(this._isAbsLeft=t,this._autoChangedValue(ih.LEFT,this._isAbsLeft))}},{key:"isAbsoluteRight",get:function(){return this._isAbsRight},set:function(t){this._isAbsRight!==t&&(this._isAbsRight=t,this._autoChangedValue(ih.RIGHT,this._isAbsRight))}},{key:"isAbsoluteHorizontalCenter",get:function(){return this._isAbsHorizontalCenter},set:function(t){this._isAbsHorizontalCenter!==t&&(this._isAbsHorizontalCenter=t,this._autoChangedValue(ih.CENTER,this._isAbsHorizontalCenter))}},{key:"isAbsoluteVerticalCenter",get:function(){return this._isAbsVerticalCenter},set:function(t){this._isAbsVerticalCenter!==t&&(this._isAbsVerticalCenter=t,this._autoChangedValue(ih.MID,this._isAbsVerticalCenter))}},{key:"alignMode",get:function(){return this._alignMode},set:function(t){this._alignMode=t,this._recursiveDirty()}},{key:"alignFlags",get:function(){return this._alignFlags},set:function(t){this._alignFlags!==t&&(this._alignFlags=t,this._recursiveDirty())}}]),e}(E),$a.AlignMode=eh,p((xa=th).prototype,"target",[ga,fa],Object.getOwnPropertyDescriptor(xa.prototype,"target"),xa.prototype),p(xa.prototype,"isAlignTop",[ya],Object.getOwnPropertyDescriptor(xa.prototype,"isAlignTop"),xa.prototype),p(xa.prototype,"isAlignBottom",[ba],Object.getOwnPropertyDescriptor(xa.prototype,"isAlignBottom"),xa.prototype),p(xa.prototype,"isAlignLeft",[Ta],Object.getOwnPropertyDescriptor(xa.prototype,"isAlignLeft"),xa.prototype),p(xa.prototype,"isAlignRight",[ma],Object.getOwnPropertyDescriptor(xa.prototype,"isAlignRight"),xa.prototype),p(xa.prototype,"isAlignVerticalCenter",[va],Object.getOwnPropertyDescriptor(xa.prototype,"isAlignVerticalCenter"),xa.prototype),p(xa.prototype,"isAlignHorizontalCenter",[Ca],Object.getOwnPropertyDescriptor(xa.prototype,"isAlignHorizontalCenter"),xa.prototype),p(xa.prototype,"isStretchWidth",[Sa],Object.getOwnPropertyDescriptor(xa.prototype,"isStretchWidth"),xa.prototype),p(xa.prototype,"isStretchHeight",[Ea],Object.getOwnPropertyDescriptor(xa.prototype,"isStretchHeight"),xa.prototype),p(xa.prototype,"top",[Oa],Object.getOwnPropertyDescriptor(xa.prototype,"top"),xa.prototype),p(xa.prototype,"editorTop",[X],Object.getOwnPropertyDescriptor(xa.prototype,"editorTop"),xa.prototype),p(xa.prototype,"bottom",[Aa],Object.getOwnPropertyDescriptor(xa.prototype,"bottom"),xa.prototype),p(xa.prototype,"editorBottom",[X],Object.getOwnPropertyDescriptor(xa.prototype,"editorBottom"),xa.prototype),p(xa.prototype,"left",[wa],Object.getOwnPropertyDescriptor(xa.prototype,"left"),xa.prototype),p(xa.prototype,"editorLeft",[X],Object.getOwnPropertyDescriptor(xa.prototype,"editorLeft"),xa.prototype),p(xa.prototype,"right",[La],Object.getOwnPropertyDescriptor(xa.prototype,"right"),xa.prototype),p(xa.prototype,"editorRight",[X],Object.getOwnPropertyDescriptor(xa.prototype,"editorRight"),xa.prototype),p(xa.prototype,"horizontalCenter",[Da],Object.getOwnPropertyDescriptor(xa.prototype,"horizontalCenter"),xa.prototype),p(xa.prototype,"editorHorizontalCenter",[X],Object.getOwnPropertyDescriptor(xa.prototype,"editorHorizontalCenter"),xa.prototype),p(xa.prototype,"verticalCenter",[Pa],Object.getOwnPropertyDescriptor(xa.prototype,"verticalCenter"),xa.prototype),p(xa.prototype,"editorVerticalCenter",[X],Object.getOwnPropertyDescriptor(xa.prototype,"editorVerticalCenter"),xa.prototype),p(xa.prototype,"isAbsoluteTop",[X],Object.getOwnPropertyDescriptor(xa.prototype,"isAbsoluteTop"),xa.prototype),p(xa.prototype,"isAbsoluteBottom",[X],Object.getOwnPropertyDescriptor(xa.prototype,"isAbsoluteBottom"),xa.prototype),p(xa.prototype,"isAbsoluteLeft",[X],Object.getOwnPropertyDescriptor(xa.prototype,"isAbsoluteLeft"),xa.prototype),p(xa.prototype,"isAbsoluteRight",[X],Object.getOwnPropertyDescriptor(xa.prototype,"isAbsoluteRight"),xa.prototype),p(xa.prototype,"isAbsoluteHorizontalCenter",[X],Object.getOwnPropertyDescriptor(xa.prototype,"isAbsoluteHorizontalCenter"),xa.prototype),p(xa.prototype,"isAbsoluteVerticalCenter",[X],Object.getOwnPropertyDescriptor(xa.prototype,"isAbsoluteVerticalCenter"),xa.prototype),p(xa.prototype,"alignMode",[za,Ia],Object.getOwnPropertyDescriptor(xa.prototype,"alignMode"),xa.prototype),p(xa.prototype,"alignFlags",[X],Object.getOwnPropertyDescriptor(xa.prototype,"alignFlags"),xa.prototype),Ba=p(xa.prototype,"_alignFlags",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Na=p(xa.prototype,"_target",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ha=p(xa.prototype,"_left",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ma=p(xa.prototype,"_right",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ka=p(xa.prototype,"_top",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Va=p(xa.prototype,"_bottom",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fa=p(xa.prototype,"_horizontalCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ja=p(xa.prototype,"_verticalCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ga=p(xa.prototype,"_isAbsLeft",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ua=p(xa.prototype,"_isAbsRight",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wa=p(xa.prototype,"_isAbsTop",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Za=p(xa.prototype,"_isAbsBottom",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ya=p(xa.prototype,"_isAbsHorizontalCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Xa=p(xa.prototype,"_isAbsVerticalCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qa=p(xa.prototype,"_originalWidth",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ka=p(xa.prototype,"_originalHeight",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qa=p(xa.prototype,"_alignMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return eh.ON_WINDOW_RESIZE}}),Ja=p(xa.prototype,"_lockFlags",[O,K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ra=xa))||Ra)||Ra)||Ra)||Ra)||Ra)||Ra));L.internal.computeInverseTransForTarget=ah,L.internal.getReadonlyNodeSize=sh;var Ph,zh=new e;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(Ph||(Ph={})),i(Ph);var Ih,Rh,xh,Bh,Nh,Hh,Mh,kh,Vh,Fh,jh,Gh,Uh,Wh,Zh,Yh,Xh,qh,Kh,Qh,Jh,$h,tl,el,il,ol,nl,rl,sl,al,hl,ll,cl,ul,_l,pl,dl,gl,fl,yl,bl,Tl,ml,vl,Cl,Sl=function(e){return t({PageViewIndicator:e,PageViewIndicatorComponent:e}),e}((hh=o("cc.PageViewIndicator"),lh=d(),ch=g(110),uh=f(),_h=n(ft),ph=T(),dh=n(Ph),gh=T(),fh=n(N),yh=T(),bh=T(),hh(Th=lh(Th=ch(Th=uh((Ah=Oh=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"spacing",vh,S(e)),C(e,"_spriteFrame",Ch,S(e)),C(e,"_direction",Sh,S(e)),C(e,"_cellSize",Eh,S(e)),e._layout=null,e._pageView=null,e._indicators=[],e}a(e,t);var i=e.prototype;return i.onLoad=function(){this._updateLayout()},i.setPageView=function(t){this._pageView=t,this._refresh()},i._updateLayout=function(){this._layout=this.getComponent(Cn),this._layout||(this._layout=this.addComponent(Cn));var t=this._layout;this.direction===Ph.HORIZONTAL?(t.type=Cn.Type.HORIZONTAL,t.spacingX=this.spacing):this.direction===Ph.VERTICAL&&(t.type=Cn.Type.VERTICAL,t.spacingY=this.spacing),t.resizeMode=Cn.ResizeMode.CONTAINER},i._createIndicator=function(){var t=new r;t.layer=this.node.layer;var e=t.addComponent(yt);return e.spriteFrame=this.spriteFrame,e.sizeMode=yt.SizeMode.CUSTOM,t.parent=this.node,t._uiProps.uiTransformComp.setContentSize(this._cellSize),t},i._changedState=function(){var t=this._indicators;if(0!==t.length&&this._pageView){var e=this._pageView.curPageIdx;if(!(e>=t.length)){for(var i=0;i<t.length;++i){var o=t[i];if(o._uiProps.uiComp){var n=o._uiProps.uiComp;zh.set(n.color),zh.a=127.5,n.color=zh}}if(t[e]._uiProps.uiComp){var r=t[e]._uiProps.uiComp;zh.set(r.color),zh.a=255,r.color=zh}}}},i._refresh=function(){if(this._pageView){var t=this._indicators,e=this._pageView.getPages();if(e.length!==t.length){var i=0;if(e.length>t.length)for(i=0;i<e.length;++i)t[i]||(t[i]=this._createIndicator());else for(i=t.length-e.length;i>0;--i){var o=t[i-1];this.node.removeChild(o),t.splice(i-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this._changedState()}}},_(e,[{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(t){this._spriteFrame!==t&&(this._spriteFrame=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t)}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize=t)}}]),e}(E),Oh.Direction=Ph,p((mh=Ah).prototype,"spriteFrame",[_h,ph],Object.getOwnPropertyDescriptor(mh.prototype,"spriteFrame"),mh.prototype),p(mh.prototype,"direction",[dh,gh],Object.getOwnPropertyDescriptor(mh.prototype,"direction"),mh.prototype),p(mh.prototype,"cellSize",[fh,yh],Object.getOwnPropertyDescriptor(mh.prototype,"cellSize"),mh.prototype),vh=p(mh.prototype,"spacing",[O,bh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ch=p(mh.prototype,"_spriteFrame",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sh=p(mh.prototype,"_direction",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ph.HORIZONTAL}}),Eh=p(mh.prototype,"_cellSize",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new N(20,20)}}),Th=mh))||Th)||Th)||Th)||Th)),El=new k;!function(t){t[t.Unified=0]="Unified",t[t.Free=1]="Free"}(ml||(ml={})),i(ml),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(vl||(vl={})),i(vl),function(t){t.PAGE_TURNING="page-turning"}(Cl||(Cl={}));var Ol=function(e){return t({PageView:e,PageViewComponent:e}),e}((Ih=o("cc.PageView"),Rh=d(),xh=g(110),Bh=f(),Nh=n(ml),Hh=T(),Mh=n(vl),kh=T(),Vh=j(),Fh=T(),jh=j(),Gh=T(),Uh=n(Sl),Wh=T(),Zh=T(),Yh=n(Kr),Xh=H(),qh=n(Kr),Kh=H(),Qh=H(),Jh=H(),$h=H(),tl=n([st]),el=H(),il=n([st]),ol=T(),Ih(nl=Rh(nl=xh(nl=Bh((Tl=bl=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"autoPageTurningThreshold",sl,S(e)),C(e,"horizontal",al,S(e)),C(e,"vertical",hl,S(e)),C(e,"cancelInnerEvents",ll,S(e)),C(e,"scrollEvents",cl,S(e)),C(e,"pageTurningSpeed",ul,S(e)),C(e,"pageEvents",_l,S(e)),C(e,"_sizeMode",pl,S(e)),C(e,"_direction",dl,S(e)),C(e,"_scrollThreshold",gl,S(e)),C(e,"_pageTurningEventTiming",fl,S(e)),C(e,"_indicator",yl,S(e)),e._curPageIdx=0,e._lastPageIdx=0,e._pages=[],e._initContentPos=new c,e._scrollCenterOffsetX=[],e._scrollCenterOffsetY=[],e._touchBeganPosition=new k,e._touchEndPosition=new k,e}a(e,t);var i=e.prototype;return i.onEnable=function(){t.prototype.onEnable.call(this),this.node.on(l.SIZE_CHANGED,this._updateAllPagesSize,this),this.node.on(e.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)},i.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(l.SIZE_CHANGED,this._updateAllPagesSize,this),this.node.off(e.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)},i.onLoad=function(){this._initPages(),this.indicator&&this.indicator.setPageView(this)},i.getCurrentPageIndex=function(){return this._curPageIdx},i.setCurrentPageIndex=function(t){this.scrollToPage(t,1)},i.getPages=function(){return this._pages},i.addPage=function(t){t&&-1===this._pages.indexOf(t)&&this.content&&(t._uiProps.uiTransformComp?(this.content.addChild(t),this._pages.push(t),this._updatePageView()):Z(4301))},i.insertPage=function(t,e){if(!(e<0)&&t&&-1===this._pages.indexOf(t)&&this.content)if(e>=this._pages.length)this.addPage(t);else{if(!t._uiProps.uiTransformComp)return void Z(4301);this._pages.splice(e,0,t),this.content.insertChild(t,e),this._updatePageView()}},i.removePage=function(t){if(t&&this.content){var e=this._pages.indexOf(t);-1!==e?this.removePageAtIndex(e):Q(4300,t.name)}},i.removePageAtIndex=function(t){var e=this._pages;if(!(t<0||t>=e.length)){var i=e[t];i&&this.content&&(this.content.removeChild(i),e.splice(t,1),this._updatePageView())}},i.removeAllPages=function(){if(this.content){for(var t=this._pages,e=0,i=t.length;e<i;e++)this.content.removeChild(t[e]);this._pages.length=0,this._updatePageView()}},i.scrollToPage=function(t,e){void 0===e&&(e=.3),t<0||t>=this._pages.length||(this._curPageIdx=t,this.scrollToOffset(this._moveOffsetValue(t),e,!0),this.indicator&&this.indicator._changedState())},i.getScrollEndedEventTiming=function(){return this.pageTurningEventTiming},i._updatePageView=function(){if(this.content){var t=this.content.getComponent(Cn);t&&t.enabled&&t.updateLayout();var e=this._pages.length;this._curPageIdx>=e&&(this._curPageIdx=0===e?0:e-1,this._lastPageIdx=this._curPageIdx);for(var i=this._initContentPos,o=0;o<e;++o){var n=this._pages[o].position;this.direction===vl.Horizontal?this._scrollCenterOffsetX[o]=Math.abs(i.x+n.x):this._scrollCenterOffsetY[o]=Math.abs(i.y+n.y)}this.indicator&&this.indicator._refresh()}},i._updateAllPagesSize=function(){var t=this.view;if(this.content&&t&&this._sizeMode===ml.Unified)for(var e=this._pages,i=t.contentSize,o=0,n=e.length;o<n;o++)e[o]._uiProps.uiTransformComp.setContentSize(i)},i._handleReleaseLogic=function(){this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(e.EventType.SCROLL_ENDED))},i._onTouchBegan=function(e,i){e.touch.getUILocation(El),k.set(this._touchBeganPosition,El.x,El.y),t.prototype._onTouchBegan.call(this,e,i)},i._onTouchMoved=function(e,i){t.prototype._onTouchMoved.call(this,e,i)},i._onTouchEnded=function(e,i){e.touch.getUILocation(El),k.set(this._touchEndPosition,El.x,El.y),t.prototype._onTouchEnded.call(this,e,i)},i._onTouchCancelled=function(e,i){e.touch.getUILocation(El),k.set(this._touchEndPosition,El.x,El.y),t.prototype._onTouchCancelled.call(this,e,i)},i._onMouseWheel=function(){},i._syncScrollDirection=function(){this.horizontal=this.direction===vl.Horizontal,this.vertical=this.direction===vl.Vertical},i._syncSizeMode=function(){var t=this.view;if(this.content&&t){var e=this.content.getComponent(Cn);if(e){if(this._sizeMode===ml.Free&&this._pages.length>0){var i=this._pages[0]._uiProps.uiTransformComp,o=this._pages[this._pages.length-1]._uiProps.uiTransformComp;this.direction===vl.Horizontal?(e.paddingLeft=(t.width-i.width)/2,e.paddingRight=(t.width-o.width)/2):this.direction===vl.Vertical&&(e.paddingTop=(t.height-i.height)/2,e.paddingBottom=(t.height-o.height)/2)}e.updateLayout()}}},i._initPages=function(){if(this.content){this._initContentPos=this.content.position;for(var t=this.content.children,e=0;e<t.length;++e){var i=t[e];this._pages.indexOf(i)>=0||this._pages.push(i)}this._syncScrollDirection(),this._syncSizeMode(),this._updatePageView()}},i._dispatchPageTurningEvent=function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,st.emitEvents(this.pageEvents,this,Cl.PAGE_TURNING),this.node.emit(Cl.PAGE_TURNING,this))},i._isQuicklyScrollable=function(t){if(this.direction===vl.Horizontal){if(Math.abs(t.x)>this.autoPageTurningThreshold)return!0}else if(this.direction===vl.Vertical&&Math.abs(t.y)>this.autoPageTurningThreshold)return!0;return!1},i._moveOffsetValue=function(t){var e=new k;if(this._sizeMode===ml.Free)this.direction===vl.Horizontal?e.x=this._scrollCenterOffsetX[t]:this.direction===vl.Vertical&&(e.y=this._scrollCenterOffsetY[t]);else{var i=this.view;if(!i)return e;this.direction===vl.Horizontal?e.x=t*i.width:this.direction===vl.Vertical&&(e.y=t*i.height)}return e},i._getDragDirection=function(t){return this._direction===vl.Horizontal?0===t.x?0:t.x>0?1:-1:0===t.y?0:t.y<0?1:-1},i._isScrollable=function(t,e,i){if(this._sizeMode===ml.Free){var o=0,n=0;if(this.direction===vl.Horizontal)return o=this._scrollCenterOffsetX[e],n=this._scrollCenterOffsetX[i],Math.abs(t.x)>=Math.abs(o-n)*this.scrollThreshold;if(this.direction===vl.Vertical)return o=this._scrollCenterOffsetY[e],n=this._scrollCenterOffsetY[i],Math.abs(t.y)>=Math.abs(o-n)*this.scrollThreshold}else{var r=this.view;if(!r)return!1;if(this.direction===vl.Horizontal)return Math.abs(t.x)>=r.width*this.scrollThreshold;if(this.direction===vl.Vertical)return Math.abs(t.y)>=r.height*this.scrollThreshold}return!1},i._autoScrollToPage=function(){if(this._startBounceBackIfNeeded()){var t=this._getHowMuchOutOfBoundary();this._clampDelta(t),(t.x>0||t.y<0)&&(this._curPageIdx=0===this._pages.length?0:this._pages.length-1),(t.x<0||t.y>0)&&(this._curPageIdx=0),this.indicator&&this.indicator._changedState()}else{var e=new k;k.subtract(e,this._touchBeganPosition,this._touchEndPosition);var i=this._curPageIdx,o=i+this._getDragDirection(e),n=this.pageTurningSpeed*Math.abs(i-o);if(o<this._pages.length){if(this._isScrollable(e,i,o))return void this.scrollToPage(o,n);var r=this._calculateTouchMoveVelocity();if(this._isQuicklyScrollable(r))return void this.scrollToPage(o,n)}this.scrollToPage(i,n)}},_(e,[{key:"sizeMode",get:function(){return this._sizeMode},set:function(t){this._sizeMode!==t&&(this._sizeMode=t,this._syncSizeMode())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._syncScrollDirection())}},{key:"scrollThreshold",get:function(){return this._scrollThreshold},set:function(t){this._scrollThreshold!==t&&(this._scrollThreshold=t)}},{key:"pageTurningEventTiming",get:function(){return this._pageTurningEventTiming},set:function(t){this._pageTurningEventTiming!==t&&(this._pageTurningEventTiming=t)}},{key:"indicator",get:function(){return this._indicator},set:function(t){this._indicator!==t&&(this._indicator=t,this.indicator&&this.indicator.setPageView(this))}},{key:"curPageIdx",get:function(){return this._curPageIdx}},{key:"verticalScrollBar",get:function(){return t.prototype.verticalScrollBar},set:function(t){this.verticalScrollBar=t}},{key:"horizontalScrollBar",get:function(){return t.prototype.horizontalScrollBar},set:function(t){this.horizontalScrollBar=t}}]),e}(Ls),bl.SizeMode=ml,bl.Direction=vl,bl.EventType=Qs(Cl,Jr),p((rl=Tl).prototype,"sizeMode",[Nh,Hh],Object.getOwnPropertyDescriptor(rl.prototype,"sizeMode"),rl.prototype),p(rl.prototype,"direction",[Mh,kh],Object.getOwnPropertyDescriptor(rl.prototype,"direction"),rl.prototype),p(rl.prototype,"scrollThreshold",[F,Vh,Fh],Object.getOwnPropertyDescriptor(rl.prototype,"scrollThreshold"),rl.prototype),p(rl.prototype,"pageTurningEventTiming",[F,jh,Gh],Object.getOwnPropertyDescriptor(rl.prototype,"pageTurningEventTiming"),rl.prototype),p(rl.prototype,"indicator",[Uh,Wh],Object.getOwnPropertyDescriptor(rl.prototype,"indicator"),rl.prototype),sl=p(rl.prototype,"autoPageTurningThreshold",[O,Zh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),p(rl.prototype,"verticalScrollBar",[Yh,J,Xh],Object.getOwnPropertyDescriptor(rl.prototype,"verticalScrollBar"),rl.prototype),p(rl.prototype,"horizontalScrollBar",[qh,J,Kh],Object.getOwnPropertyDescriptor(rl.prototype,"horizontalScrollBar"),rl.prototype),al=p(rl.prototype,"horizontal",[J,O,Qh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),hl=p(rl.prototype,"vertical",[J,O,Jh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ll=p(rl.prototype,"cancelInnerEvents",[J,O,$h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cl=p(rl.prototype,"scrollEvents",[tl,O,J,el],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ul=p(rl.prototype,"pageTurningSpeed",[O,X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),_l=p(rl.prototype,"pageEvents",[il,O,ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pl=p(rl.prototype,"_sizeMode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ml.Unified}}),dl=p(rl.prototype,"_direction",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return vl.Horizontal}}),gl=p(rl.prototype,"_scrollThreshold",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),fl=p(rl.prototype,"_pageTurningEventTiming",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),yl=p(rl.prototype,"_indicator",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nl=rl))||nl)||nl)||nl)||nl)),Al=new c,wl=new k,Ll=new k,Dl=new k(1,1),Pl=new k,zl=new k;function Il(t,e){if(!e._hadAlignOnce){e.alignMode===eh.ONCE&&(e._hadAlignOnce=!0);var i,o=e.target,n=Ll,r=Dl;o?ah(t,i=o,n,r):i=t.parent;var s=sh(i),a=i instanceof q||!i.getComponent(Ct),h=a?wl:i.getComponent(Ct).anchorPoint,l=a;t.getPosition(Al);var u=t._uiProps.uiTransformComp,_=Al.x,p=Al.y,d=u.anchorPoint,g=t.getScale();if(e.alignFlags&ih.HORIZONTAL){var f=0,y=0,b=s.width;l?(f=_t.left.x,y=_t.right.x):y=(f=-h.x*b)+b,f+=e.isAbsoluteLeft?e.left:e.left*b,y-=e.isAbsoluteRight?e.right:e.right*b,o&&(f+=n.x,f*=r.x,y+=n.x,y*=r.x);var T=0,m=d.x,v=g.x;if(v<0&&(m=1-m,v=-v),e.isStretchWidth)T=y-f,0!==v&&(u.width=T/v),_=f+m*T;else if(T=u.width*v,e.isAlignHorizontalCenter){var C=e.isAbsoluteHorizontalCenter?e.horizontalCenter:e.horizontalCenter*b,S=(.5-h.x)*s.width;o&&(C*=r.x,S+=n.x,S*=r.x),_=S+(m-.5)*T+C}else _=e.isAlignLeft?f+m*T:y+(m-1)*T;e._lastSize.width=T}if(e.alignFlags&ih.VERTICAL){var E=0,O=0,A=s.height;l?(O=_t.bottom.y,E=_t.top.y):E=(O=-h.y*A)+A,O+=e.isAbsoluteBottom?e.bottom:e.bottom*A,E-=e.isAbsoluteTop?e.top:e.top*A,o&&(O+=n.y,O*=r.y,E+=n.y,E*=r.y);var w=0,L=d.y,D=g.y;if(D<0&&(L=1-L,D=-D),e.isStretchHeight)w=E-O,0!==D&&(u.height=w/D),p=O+L*w;else if(w=u.height*D,e.isAlignVerticalCenter){var P=e.isAbsoluteVerticalCenter?e.verticalCenter:e.verticalCenter*A,z=(.5-h.y)*s.height;o&&(P*=r.y,z+=n.y,z*=r.y),p=z+(L-.5)*w+P}else p=e.isAlignBottom?O+L*w:E+(L-1)*w;e._lastSize.height=w}t.setPosition(_,p,Al.z),c.set(e._lastPos,_,p,Al.z)}}function Rl(t){var e=t.getComponent(Dh);if(e&&e.enabled){if(!L.isValid(t,!0))return;Fl.push(e)}for(var i,o=t.children,n=W(o);!(i=n()).done;){var r=i.value;r.active&&Rl(r)}}function xl(){var t=at.getScene();if(t){jl.isAligning=!0,jl._nodesOrderDirty&&(Fl.length=0,Rl(t),jl._nodesOrderDirty=!1);var e=null,i=jl._activeWidgetsIterator;for(i.i=0;i.i<Fl.length;++i.i)(e=Fl[i.i])._dirty&&(Il(e.node,e),e._dirty=!1);jl.isAligning=!1}}var Bl,Nl,Hl,Ml,kl,Vl,Fl=[],jl=t("widgetManager",L._widgetManager={isAligning:!1,_nodesOrderDirty:!1,_activeWidgetsIterator:new $.MutableForwardIterator(Fl),animationState:null,init:function(){at.on(ht.EVENT_AFTER_SCENE_LAUNCH,xl),at.on(ht.EVENT_AFTER_UPDATE,xl),dt.instance.on("design-resolution-changed",this.onResized,this);var t=this.onResized.bind(this);dt.instance.on("canvas-resize",t),tt.on("orientation-change",t)},add:function(){this._nodesOrderDirty=!0},remove:function(t){this._activeWidgetsIterator.remove(t)},onResized:function(){var t=at.getScene();t&&this.refreshWidgetOnResized(t)},refreshWidgetOnResized:function(t){var e=r.isNode(t)&&t.getComponent(Dh);e&&e.enabled&&(e.alignMode===eh.ON_WINDOW_RESIZE||e.alignMode===eh.ALWAYS)&&e.setDirty();for(var i,o=t.children,n=W(o);!(i=n()).done;){var s=i.value;this.refreshWidgetOnResized(s)}},updateOffsetsToStayPut:function(t,e){function i(t,e){return Math.abs(t-e)>1e-10?e:t}var o=t.node,n=o.parent;if(n){var r=Pl;r.set(0,0);var s=zl;if(s.set(1,1),t.target&&ah(o,n=t.target,r,s),!e)return;var a=n._uiProps&&n._uiProps.uiTransformComp,h=a?a.anchorPoint:wl,l=o._uiProps.uiTransformComp,c=sh(n),u=l.anchorPoint,_=o.getPosition(),p=ih,d=o.getScale(),g=0;if(e&p.LEFT){var f=-h.x*c.width;f+=r.x,f*=s.x,g=_.x-u.x*l.width*d.x-f,t.isAbsoluteLeft||(g/=c.width),g/=s.x,t.left=i(t.left,g)}if(e&p.RIGHT){var y=(1-h.x)*c.width;y+=r.x,g=(y*=s.x)-(_.x+(1-u.x)*l.width*d.x),t.isAbsoluteRight||(g/=c.width),g/=s.x,t.right=i(t.right,g)}if(e&p.TOP){var b=(1-h.y)*c.height;b+=r.y,g=(b*=s.y)-(_.y+(1-u.y)*l.height*d.y),t.isAbsoluteTop||(g/=c.height),g/=s.y,t.top=i(t.top,g)}if(e&p.BOT){var T=-h.y*c.height;T+=r.y,T*=s.y,g=_.y-u.y*l.height*d.y-T,t.isAbsoluteBottom||(g/=c.height),g/=s.y,t.bottom=i(t.bottom,g)}}},updateAlignment:function t(e){var i=e.parent;i&&r.isNode(i)&&t(i);var o=e.getComponent(Dh);o&&i&&Il(e,o)},AlignMode:eh,AlignFlags:ih});at.on(ht.EVENT_INIT,(function(){jl.init()}));var Gl,Ul,Wl,Zl,Yl,Xl,ql,Kl,Ql,Jl,$l,tc,ec,ic,oc,nc,rc,sc,ac,hc,lc,cc=function(e){return t({SafeArea:e,SafeAreaComponent:e}),e}((Bl=o("cc.SafeArea"),Nl=d(),Hl=g(110),Ml=f(),kl=y(Dh),Bl(Vl=Nl(Vl=Hl(Vl=s(Vl=Ml(Vl=kl(Vl=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var i=e.prototype;return i.onEnable=function(){this.updateArea(),tt.on("window-resize",this.updateArea,this),tt.on("orientation-change",this.updateArea,this)},i.onDisable=function(){tt.off("window-resize",this.updateArea,this),tt.off("orientation-change",this.updateArea,this)},i.updateArea=function(){var t=this.node.getComponent(Dh),e=this.node.getComponent(Ct);if(t&&e){t.updateAlignment();var i=this.node.position.clone(),o=e.anchorPoint.clone();t.isAlignTop=t.isAlignBottom=t.isAlignLeft=t.isAlignRight=!0;var n=lt.getVisibleSize(),r=n.width,s=n.height,a=P.getSafeAreaRect();t.top=s-a.y-a.height,t.bottom=a.y,t.left=a.x,t.right=r-a.x-a.width,t.updateAlignment();var h=this.node.position.clone(),l=o.x-(h.x-i.x)/e.width,c=o.y-(h.y-i.y)/e.height;e.setAnchorPoint(l,c),jl.add(t)}},e}(E))||Vl)||Vl)||Vl)||Vl)||Vl)||Vl)),uc=function(e){return t({UICoordinateTracker:e,UICoordinateTrackerComponent:e}),e}((Gl=o("cc.UICoordinateTracker"),Ul=d(),Wl=f(),Zl=g(110),Yl=n(r),Xl=T(),ql=n(gt),Kl=T(),Ql=T(),Jl=T(),$l=n([st]),tc=T(),Gl(ec=Ul(ec=Wl(ec=Zl((hc=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,C(e,"syncEvents",oc,S(e)),C(e,"_target",nc,S(e)),C(e,"_camera",rc,S(e)),C(e,"_useScale",sc,S(e)),C(e,"_distance",ac,S(e)),e._transformPos=new c,e._viewPos=new c,e._canMove=!0,e._lastWPos=new c,e._lastCameraPos=new c,e}a(e,t);var i=e.prototype;return i.onEnable=function(){this._checkCanMove()},i.update=function(){var t=this.node.worldPosition,e=this._camera;if(this._canMove&&e&&e.camera&&(!this._lastWPos.equals(t)||!this._lastCameraPos.equals(e.node.worldPosition))&&(this._lastWPos.set(t),this._lastCameraPos.set(e.node.worldPosition),e.camera.update(),e.convertToUINode(t,this._target,this._transformPos),this._useScale&&c.transformMat4(this._viewPos,this.node.worldPosition,e.camera.matView),this.syncEvents.length>0)){var i=this._distance/Math.abs(this._viewPos.z);st.emitEvents(this.syncEvents,this._transformPos,i)}},i._checkCanMove=function(){this._canMove=!(!this._camera||!this._target)},_(e,[{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._target=t,this._checkCanMove())}},{key:"camera",get:function(){return this._camera},set:function(t){this._camera!==t&&(this._camera=t,this._checkCanMove())}},{key:"useScale",get:function(){return this._useScale},set:function(t){this._useScale!==t&&(this._useScale=t)}},{key:"distance",get:function(){return this._distance},set:function(t){this._distance!==t&&(this._distance=t)}}]),e}(E),p((ic=hc).prototype,"target",[Yl,Xl],Object.getOwnPropertyDescriptor(ic.prototype,"target"),ic.prototype),p(ic.prototype,"camera",[ql,Kl],Object.getOwnPropertyDescriptor(ic.prototype,"camera"),ic.prototype),p(ic.prototype,"useScale",[Ql],Object.getOwnPropertyDescriptor(ic.prototype,"useScale"),ic.prototype),p(ic.prototype,"distance",[Jl],Object.getOwnPropertyDescriptor(ic.prototype,"distance"),ic.prototype),oc=p(ic.prototype,"syncEvents",[$l,O,tc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),nc=p(ic.prototype,"_target",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rc=p(ic.prototype,"_camera",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sc=p(ic.prototype,"_useScale",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ac=p(ic.prototype,"_distance",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ec=ic))||ec)||ec)||ec)||ec)),_c=[l.TOUCH_START,l.TOUCH_END,l.TOUCH_MOVE,l.MOUSE_DOWN,l.MOUSE_MOVE,l.MOUSE_UP,l.MOUSE_ENTER,l.MOUSE_LEAVE,l.MOUSE_WHEEL];function pc(t){t.propagationStopped=!0}var dc,gc,fc,yc,bc,Tc,mc,vc,Cc,Sc,Ec,Oc,Ac,wc=function(e){return t({BlockInputEvents:e,BlockInputEventsComponent:e}),e}(o("cc.BlockInputEvents")(lc=d()(lc=f()(lc=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var i=e.prototype;return i.onEnable=function(){for(var t=0;t<_c.length;t++)this.node.on(_c[t],pc,this)},i.onDisable=function(){for(var t=0;t<_c.length;t++)this.node.off(_c[t],pc,this)},e}(E))||lc)||lc)||lc),Lc=t("SubContextView",(dc=o("cc.SubContextView"),gc=d(),fc=g(110),yc=y(Ct),bc=f(),Tc=T(),mc=T(),dc(vc=gc(vc=fc(vc=yc(vc=bc((Oc=function(t){function e(){var e;return e=t.call(this)||this,C(e,"_fps",Sc,S(e)),e._sprite=void 0,e._imageAsset=void 0,e._texture=void 0,e._updatedTime=0,e._updateInterval=0,e._openDataContext=void 0,e._content=void 0,C(e,"_designResolutionSize",Ec,S(e)),e._content=new r("content"),e._content.hideFlags|=it.Flags.DontSave|it.Flags.HideInHierarchy,e._sprite=null,e._imageAsset=new ot,e._openDataContext=null,e._updatedTime=performance.now(),e._texture=new nt,e}a(e,t);var i=e.prototype;return i.onLoad=function(){et.getOpenDataContext?(this._updateInterval=1e3/this._fps,this._openDataContext=et.getOpenDataContext(),this._initSharedCanvas(),this._initContentNode(),this._updateSubContextView(),this._updateContentLayer()):this.enabled=!1},i.onEnable=function(){this._registerNodeEvent()},i.onDisable=function(){this._unregisterNodeEvent()},i._initSharedCanvas=function(){if(this._openDataContext){var t=this._openDataContext.canvas;t.width=this._designResolutionSize.width,t.height=this._designResolutionSize.height}},i._initContentNode=function(){if(this._openDataContext){var t=this._openDataContext.canvas,e=this._imageAsset;if(e.reset(t),this._texture.image=e,this._texture.create(t.width,t.height),this._sprite=this._content.getComponent(yt),this._sprite||(this._sprite=this._content.addComponent(yt)),this._sprite.spriteFrame)this._sprite.spriteFrame.texture=this._texture;else{var i=new ft;i.texture=this._texture,this._sprite.spriteFrame=i}this._content.parent=this.node}},i._updateSubContextView=function(){if(this._openDataContext){var t=this.node.getComponent(Ct),e=this._content.getComponent(Ct),i=t.width/e.width,o=t.height/e.height,n=i>o?o:i;e.width*=n,e.height*=n;var r=lt.getViewportRect(),s=e.getBoundingBoxToWorld(),a=lt.getVisibleSize(),h=lt.getDevicePixelRatio(),l=(r.width*(s.x/a.width)+r.x)/h,c=(r.height*(s.y/a.height)+r.y)/h,u=r.width*(s.width/a.width)/h,_=r.height*(s.height/a.height)/h;this._openDataContext.postMessage({fromEngine:!0,type:"engine",event:"viewport",x:l,y:c,width:u,height:_})}},i._updateSubContextTexture=function(){var t=this._imageAsset;if(t&&this._openDataContext&&!(t.width<=0||t.height<=0)){var e=this._openDataContext.canvas;t.reset(e),(e.width>t.width||e.height>t.height)&&this._texture.create(e.width,e.height),this._texture.uploadData(e)}},i._registerNodeEvent=function(){this.node.on(l.TRANSFORM_CHANGED,this._updateSubContextView,this),this.node.on(l.SIZE_CHANGED,this._updateSubContextView,this),this.node.on(l.LAYER_CHANGED,this._updateContentLayer,this)},i._unregisterNodeEvent=function(){this.node.off(l.TRANSFORM_CHANGED,this._updateSubContextView,this),this.node.off(l.SIZE_CHANGED,this._updateSubContextView,this),this.node.off(l.LAYER_CHANGED,this._updateContentLayer,this)},i._updateContentLayer=function(){this._content.layer=this.node.layer},i.update=function(t){void 0===t?this._updateSubContextTexture():performance.now()-this._updatedTime>=this._updateInterval&&(this._updatedTime+=this._updateInterval,this._updateSubContextTexture())},i.onDestroy=function(){this._content.destroy(),this._texture.destroy(),this._sprite&&this._sprite.destroy(),this._imageAsset.destroy(),this._openDataContext=null},_(e,[{key:"designResolutionSize",get:function(){return this._designResolutionSize},set:function(){}},{key:"fps",get:function(){return this._fps},set:function(t){this._fps!==t&&(this._fps=t,this._updateInterval=1e3/t)}}]),e}(E),p((Cc=Oc).prototype,"designResolutionSize",[Tc],Object.getOwnPropertyDescriptor(Cc.prototype,"designResolutionSize"),Cc.prototype),p(Cc.prototype,"fps",[mc],Object.getOwnPropertyDescriptor(Cc.prototype,"fps"),Cc.prototype),Sc=p(Cc.prototype,"_fps",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),Ec=p(Cc.prototype,"_designResolutionSize",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new N(640,960)}}),vc=Cc))||vc)||vc)||vc)||vc)||vc));L.SubContextView=Lc;var Dc=t("UIReorderComponent",o("cc.UIReorderComponent")(Ac=function(){Q(1408,"UIReorderComponent")})||Ac);L.UIReorderComponent=Dc,L.ButtonComponent=we,rt.setClassAlias(we,"cc.ButtonComponent"),L.EditBoxComponent=Ko,rt.setClassAlias(Ko,"cc.EditBoxComponent"),L.LayoutComponent=Cn,rt.setClassAlias(Cn,"cc.LayoutComponent"),L.ProgressBarComponent=Xn,rt.setClassAlias(Xn,"cc.ProgressBarComponent"),L.ScrollViewComponent=Ls,rt.setClassAlias(Ls,"cc.ScrollViewComponent"),L.ScrollBarComponent=Kr,rt.setClassAlias(Kr,"cc.ScrollBarComponent"),L.SliderComponent=Ks,rt.setClassAlias(Ks,"cc.SliderComponent"),L.ToggleComponent=oh,rt.setClassAlias(oh,"cc.ToggleComponent"),L.ToggleContainerComponent=nh,rt.setClassAlias(nh,"cc.ToggleContainerComponent"),L.WidgetComponent=Dh,rt.setClassAlias(Dh,"cc.WidgetComponent"),L.PageViewComponent=Ol,rt.setClassAlias(Ol,"cc.PageViewComponent"),L.PageViewIndicatorComponent=Sl,rt.setClassAlias(Sl,"cc.PageViewIndicatorComponent"),L.SafeAreaComponent=cc,rt.setClassAlias(cc,"cc.SafeAreaComponent"),rt.setClassAlias(uc,"cc.UICoordinateTrackerComponent"),L.BlockInputEventsComponent=wc,rt.setClassAlias(wc,"cc.BlockInputEventsComponent")}}}));
