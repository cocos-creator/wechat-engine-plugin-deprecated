System.register(["./json-asset-1f2be75e.js","./view-368b93a3.js","./camera-component-4c08f67b.js","./renderable-2d-549948c8.js"],(function(e){"use strict";var t,n,o,a,r,i,s,c,m,p,h,u,C,l,_,f,d,g,y,v,b,R,S,T,E,A,w,D,z,O,N,G;return{setters:[function(e){t=e.ee,n=e.gA,o=e.fX,a=e.eb,r=e.l,i=e.g9,s=e.fZ,c=e.gB,m=e.dN,p=e.c5,h=e.cJ,u=e.ej,C=e.gC,l=e.e1,_=e.ef,f=e.fY,d=e.fT,g=e.eg,y=e.ec,v=e.eh,b=e.cS,R=e.cR,S=e.cj,T=e.cT,E=e.eL},function(e){A=e._,w=e.w,D=e.v},function(e){z=e.C},function(e){O=e.U,N=e.a,G=e.R}],execute:function(){var P,U,x,W,F,j,I,H,M,L,V,B,Y,k,X,J=e("R",t("cc.RenderRoot2D")(P=i(100)(P=s()(P=c(O)(P=n(P=o(P=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.onEnable=function(){r.director.root.batcher2D.addScreen(this)},n.onDisable=function(){r.director.root.batcher2D.removeScreen(this)},n.onDestroy=function(){r.director.root.batcher2D.removeScreen(this)},t}(m))||P)||P)||P)||P)||P)||P),K=new p,Z=h({OVERLAY:0,INTERSPERSE:1}),q=e("C",(U=t("cc.Canvas"),x=f(),W=i(100),F=s(),j=u(z),I=d(),H=d(),M=u(z),U(L=x(L=W(L=F(L=o(L=n((k=function(e){function t(){var t;return t=e.call(this)||this,g(t,"_cameraComponent",B,y(t)),g(t,"_alignCanvasWithScreen",Y,y(t)),t._thisOnCameraResized=void 0,t._fitDesignResolution=void 0,t._pos=new p,t._renderMode=Z.OVERLAY,t._thisOnCameraResized=t._onResizeCamera.bind(y(t)),t}a(t,e);var n=t.prototype;return n.__preload=function(){var e=this.getComponent("cc.Widget");e&&e.updateAlignment(),this._cameraComponent&&(this._cameraComponent._createCamera(),this._cameraComponent.node.on(z.TARGET_TEXTURE_CHANGE,this._thisOnCameraResized)),this._onResizeCamera(),this.node.on(C.TRANSFORM_CHANGED,this._thisOnCameraResized)},n.onEnable=function(){e.prototype.onEnable.call(this),this._cameraComponent&&this._cameraComponent.node.on(z.TARGET_TEXTURE_CHANGE,this._thisOnCameraResized)},n.onDisable=function(){e.prototype.onDisable.call(this),this._cameraComponent&&this._cameraComponent.node.off(z.TARGET_TEXTURE_CHANGE,this._thisOnCameraResized)},n.onDestroy=function(){e.prototype.onDestroy.call(this),this.node.off(C.TRANSFORM_CHANGED,this._thisOnCameraResized)},n._onResizeCamera=function(){if(this._cameraComponent&&this._alignCanvasWithScreen){if(this._cameraComponent.targetTexture){var e=this._cameraComponent.targetTexture.window;this._cameraComponent.camera&&this._cameraComponent.camera.setFixedSize(e.width,e.height),this._cameraComponent.orthoHeight=A.height/2}else if(w.canvas){var t=w.canvas;this._cameraComponent.camera&&this._cameraComponent.camera.resize(t.width,t.height),this._cameraComponent.orthoHeight=w.canvas.height/D.getScaleY()/2}this.node.getWorldPosition(K),this._cameraComponent.node.setWorldPosition(K.x,K.y,1e3)}},n._getViewPriority=function(){if(this._cameraComponent){var e,t=null===(e=this.cameraComponent)||void 0===e?void 0:e.priority;return this._renderMode===Z.OVERLAY?t|1<<30:t&~(1<<30)}return 0},l(t,[{key:"renderMode",get:function(){return this._renderMode},set:function(e){this._renderMode=e,this._cameraComponent&&(this._cameraComponent.priority=this._getViewPriority())}},{key:"cameraComponent",get:function(){return this._cameraComponent},set:function(e){this._cameraComponent!==e&&(this._cameraComponent=e,this._onResizeCamera())}},{key:"alignCanvasWithScreen",get:function(){return this._alignCanvasWithScreen},set:function(e){this._alignCanvasWithScreen=e,this._onResizeCamera()}}]),t}(J),_((V=k).prototype,"cameraComponent",[j,I],Object.getOwnPropertyDescriptor(V.prototype,"cameraComponent"),V.prototype),_(V.prototype,"alignCanvasWithScreen",[H],Object.getOwnPropertyDescriptor(V.prototype,"alignCanvasWithScreen"),V.prototype),B=_(V.prototype,"_cameraComponent",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=_(V.prototype,"_alignCanvasWithScreen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=V))||L)||L)||L)||L)||L)||L));r.Canvas=q;var Q=e("U",t("cc.UIComponent")(X=c(O)(X=i(110)(X=n(X=o(X=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._lastParent=null,t.stencilStage=N.DISABLED,t}a(t,e);var n=t.prototype;return n.__preload=function(){this.node._uiProps.uiComp=this},n.onEnable=function(){},n.onDisable=function(){},n.onDestroy=function(){this.node._uiProps.uiComp===this&&(this.node._uiProps.uiComp=null)},n.updateAssembler=function(){},n.postUpdateAssembler=function(){},n.markForUpdateRenderData=function(){},t}(m))||X)||X)||X)||X)||X);b(Q.prototype,"UIComponent",[{name:"_visibility"},{name:"setVisibility"}]),R(q.prototype,"Canvas.prototype",[{name:"camera",newName:"cameraComponent.camera",customGetter:function(){return this._cameraComponent.camera}},{name:"clearFlag",newName:"cameraComponent.clearFlags",customGetter:function(){return this._cameraComponent?this._cameraComponent.clearFlags:0},customSetter:function(e){this._cameraComponent&&(this._cameraComponent.clearFlags=e)}},{name:"color",newName:"cameraComponent.clearColor",customGetter:function(){return this._cameraComponent?this._cameraComponent.clearColor:S.BLACK},customSetter:function(e){this._cameraComponent&&(this._cameraComponent.clearColor=e)}},{name:"priority",newName:"cameraComponent.priority",customGetter:function(){return this._cameraComponent?this._cameraComponent.priority:0},customSetter:function(e){this._cameraComponent&&(this._cameraComponent.priority=e)}},{name:"targetTexture",newName:"cameraComponent.targetTexture",customGetter:function(){return this._cameraComponent?this._cameraComponent.targetTexture:null},customSetter:function(e){this._cameraComponent&&(this._cameraComponent.targetTexture=e)}},{name:"visibility",newName:"cameraComponent.visibility",customGetter:function(){return this._cameraComponent?this._cameraComponent.visibility:0}}]),T(G.prototype,"Renderable2D.prototype",[{name:"srcBlendFactor",suggest:"Please use a custom material to specify blending options instead."},{name:"dstBlendFactor",suggest:"Please use a custom material to specify blending options instead."}]),T(O.prototype,"UITransform.prototype",[{name:"priority",suggest:"Please use setSiblingIndex to change index of the current node in its parent's children array."}]),r.UITransformComponent=O,E.setClassAlias(O,"cc.UITransformComponent"),E.setClassAlias(G,"cc.RenderComponent"),r.CanvasComponent=q,E.setClassAlias(q,"cc.CanvasComponent")}}}));
